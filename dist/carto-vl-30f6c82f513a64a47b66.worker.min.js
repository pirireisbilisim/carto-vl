/*!
 * CARTO VL js https://carto.com/
 * Version: 1.4.3-alpha.2
 * 
 */!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=67)}([function(e,t){e.exports=function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function _getPrototypeOf(t){return e.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}e.exports=_getPrototypeOf},function(e,t){function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}},function(e,t,r){var n=r(8),o=r(60);e.exports=function _possibleConstructorReturn(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t,r){var n=r(12);e.exports=function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(35),o=r(36),a=r(37);e.exports=function _slicedToArray(e,t){return n(e)||o(e,t)||a()}},function(e,t,r){"use strict";var n=r(16),o=r(44),a=Object.prototype.toString;function isArray(e){return"[object Array]"===a.call(e)}function isObject(e){return null!==e&&"object"==typeof e}function isFunction(e){return"[object Function]"===a.call(e)}function forEach(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:isArray,isArrayBuffer:function isArrayBuffer(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:o,isFormData:function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function isString(e){return"string"==typeof e},isNumber:function isNumber(e){return"number"==typeof e},isObject:isObject,isUndefined:function isUndefined(e){return void 0===e},isDate:function isDate(e){return"[object Date]"===a.call(e)},isFile:function isFile(e){return"[object File]"===a.call(e)},isBlob:function isBlob(e){return"[object Blob]"===a.call(e)},isFunction:isFunction,isStream:function isStream(e){return isObject(e)&&isFunction(e.pipe)},isURLSearchParams:function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:forEach,merge:function merge(){var e={};function assignValue(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=merge(e[r],t):e[r]=t}for(var t=0,r=arguments.length;t<r;t++)forEach(arguments[t],assignValue);return e},deepMerge:function deepMerge(){var e={};function assignValue(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=deepMerge(e[r],t):e[r]="object"==typeof t?deepMerge({},t):t}for(var t=0,r=arguments.length;t<r;t++)forEach(arguments[t],assignValue);return e},extend:function extend(e,t,r){return forEach(t,function assignValue(t,o){e[o]=r&&"function"==typeof t?n(t,r):t}),e},trim:function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){var n=r(64),o=r(65),a=r(66);e.exports=function _toConsumableArray(e){return n(e)||o(e)||a()}},function(e,t){function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(e){return typeof e}:function _typeof2(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(t){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?e.exports=_typeof=function _typeof(e){return _typeof2(e)}:e.exports=_typeof=function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},_typeof(t)}e.exports=_typeof},function(e,t,r){r(1);var n=r(63);function _get(t,r,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=_get=Reflect.get:e.exports=_get=function _get(e,t,r){var o=n(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(r):a.value}},_get(t,r,o||t)}e.exports=_get},function(e,t,r){e.exports=r(38)},function(e,t){function asyncGeneratorStep(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,o,_next,_throw,"throw",e)}_next(void 0)})}}},function(e,t){function _setPrototypeOf(t,r){return e.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(t,r)}e.exports=_setPrototypeOf},function(e,t,r){e.exports=r(43)},function(e,t,r){"use strict";var n=r(15);function VectorTileLayer(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(readLayer,this,t),this.length=this._features.length}function readLayer(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function readValueMessage(e){var t=null,r=e.readVarint()+e.pos;for(;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}e.exports=VectorTileLayer,VectorTileLayer.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new n(this._pbf,t,this.extent,this._keys,this._values)}},function(e,t,r){"use strict";var n=r(41);function VectorTileFeature(e,t,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=o,e.readFields(readFeature,this,t)}function readFeature(e,t,r){1==e?t.id=r.readVarint():2==e?function readTag(e,t){var r=e.readVarint()+e.pos;for(;e.pos<r;){var n=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[n]=o}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function signedArea(e){for(var t,r,n=0,o=0,a=e.length,i=a-1;o<a;i=o++)t=e[o],n+=((r=e[i]).x-t.x)*(t.y+r.y);return n}e.exports=VectorTileFeature,VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,o=1,a=0,i=0,s=0,u=[];e.pos<r;){if(a<=0){var c=e.readVarint();o=7&c,a=c>>3}if(a--,1===o||2===o)i+=e.readSVarint(),s+=e.readSVarint(),1===o&&(t&&u.push(t),t=[]),t.push(new n(i,s));else{if(7!==o)throw new Error("unknown command "+o);t&&t.push(t[0].clone())}}return t&&u.push(t),u},VectorTileFeature.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,o=0,a=0,i=1/0,s=-1/0,u=1/0,c=-1/0;e.pos<t;){if(n<=0){var f=e.readVarint();r=7&f,n=f>>3}if(n--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),o<i&&(i=o),o>s&&(s=o),a<u&&(u=a),a>c&&(c=a);else if(7!==r)throw new Error("unknown command "+r)}return[i,u,s,c]},VectorTileFeature.prototype.toGeoJSON=function(e,t,r){var n,o,a=this.extent*Math.pow(2,r),i=this.extent*e,s=this.extent*t,u=this.loadGeometry(),c=VectorTileFeature.types[this.type];function project(e){for(var t=0;t<e.length;t++){var r=e[t],n=180-360*(r.y+s)/a;e[t]=[360*(r.x+i)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(n=0;n<u.length;n++)f[n]=u[n][0];project(u=f);break;case 2:for(n=0;n<u.length;n++)project(u[n]);break;case 3:for(u=function classifyRings(e){var t=e.length;if(t<=1)return[e];for(var r,n,o=[],a=0;a<t;a++){var i=signedArea(e[a]);0!==i&&(void 0===n&&(n=i<0),n===i<0?(r&&o.push(r),r=[e[a]]):r.push(e[a]))}r&&o.push(r);return o}(u),n=0;n<u.length;n++)for(o=0;o<u[n].length;o++)project(u[n][o])}1===u.length?u=u[0]:c="Multi"+c;var l={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(l.id=this.id),l}},function(e,t,r){"use strict";e.exports=function bind(e,t){return function wrap(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(6);function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function buildURL(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,function serialize(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function parseValue(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(encode(t)+"="+encode(e))}))}),o=a.join("&")}if(o){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,r){"use strict";e.exports=function isCancel(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var n=r(6),o=r(50),a={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i={adapter:function getDefaultAdapter(){var e;return void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?e=r(20):"undefined"!=typeof XMLHttpRequest&&(e=r(20)),e}(),transformRequest:[function transformRequest(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function transformResponse(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function forEachMethodNoData(e){i.headers[e]={}}),n.forEach(["post","put","patch"],function forEachMethodWithData(e){i.headers[e]=n.merge(a)}),e.exports=i}).call(this,r(49))},function(e,t,r){"use strict";var n=r(6),o=r(51),a=r(17),i=r(53),s=r(54),u=r(21);e.exports=function xhrAdapter(e){return new Promise(function dispatchXhrRequest(t,c){var f=e.data,l=e.headers;n.isFormData(f)&&delete l["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",p=e.auth.password||"";l.Authorization="Basic "+btoa(d+":"+p)}if(h.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function handleLoad(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?i(h.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};o(t,c,n),h=null}},h.onabort=function handleAbort(){h&&(c(u("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function handleError(){c(u("Network Error",e,null,h)),h=null},h.ontimeout=function handleTimeout(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var y=r(55),m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;m&&(l[e.xsrfHeaderName]=m)}if("setRequestHeader"in h&&n.forEach(l,function setRequestHeader(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete l[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function onCanceled(e){h&&(h.abort(),c(e),h=null)}),void 0===f&&(f=null),h.send(f)})}},function(e,t,r){"use strict";var n=r(52);e.exports=function createError(e,t,r,o,a){var i=new Error(e);return n(i,t,r,o,a)}},function(e,t,r){"use strict";var n=r(6);e.exports=function mergeConfig(e,t){t=t||{};var r={};return n.forEach(["url","method","params","data"],function valueFromConfig2(e){void 0!==t[e]&&(r[e]=t[e])}),n.forEach(["headers","auth","proxy"],function mergeDeepProperties(o){n.isObject(t[o])?r[o]=n.deepMerge(e[o],t[o]):void 0!==t[o]?r[o]=t[o]:n.isObject(e[o])?r[o]=n.deepMerge(e[o]):void 0!==e[o]&&(r[o]=e[o])}),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function defaultToConfig2(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}),r}},function(e,t,r){"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,e.exports=Cancel},function(e,t,r){e.exports.VectorTile=r(40),e.exports.VectorTileFeature=r(15),e.exports.VectorTileLayer=r(14)},function(e,t,r){"use strict";e.exports=Pbf;var n=r(42);function Pbf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;function readPackedEnd(e){return e.type===Pbf.Bytes?e.readVarint()+e.pos:e.pos+1}function toNum(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function makeRoomForExtraLength(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var o=r.pos-1;o>=e;o--)r.buf[o+n]=r.buf[o]}function writePackedVarint(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function writePackedSVarint(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function writePackedFloat(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function writePackedDouble(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function writePackedBoolean(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function writePackedFixed32(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function writePackedSFixed32(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function writePackedFixed64(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function writePackedSFixed64(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function readUInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function writeInt32(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function readInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),o=n>>3,a=this.pos;this.type=7&n,e(o,t,this),this.pos===a&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=readUInt32(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=readInt32(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=readUInt32(this.buf,this.pos)+4294967296*readUInt32(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=readUInt32(this.buf,this.pos)+4294967296*readInt32(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function readVarintRemainder(e,t,r){var n,o,a=r.buf;if(o=a[r.pos++],n=(112&o)>>4,o<128)return toNum(e,n,t);if(o=a[r.pos++],n|=(127&o)<<3,o<128)return toNum(e,n,t);if(o=a[r.pos++],n|=(127&o)<<10,o<128)return toNum(e,n,t);if(o=a[r.pos++],n|=(127&o)<<17,o<128)return toNum(e,n,t);if(o=a[r.pos++],n|=(127&o)<<24,o<128)return toNum(e,n,t);if(o=a[r.pos++],n|=(1&o)<<31,o<128)return toNum(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function readUtf8(e,t,r){var n="",o=t;for(;o<r;){var a,i,s,u=e[o],c=null,f=u>239?4:u>223?3:u>191?2:1;if(o+f>r)break;1===f?u<128&&(c=u):2===f?128==(192&(a=e[o+1]))&&(c=(31&u)<<6|63&a)<=127&&(c=null):3===f?(a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&((c=(15&u)<<12|(63&a)<<6|63&i)<=2047||c>=55296&&c<=57343)&&(c=null)):4===f&&(a=e[o+1],i=e[o+2],s=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&((c=(15&u)<<18|(63&a)<<12|(63&i)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,f=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),o+=f}return n}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var r=readPackedEnd(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(t===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Pbf.Fixed32)this.pos+=4;else{if(t!==Pbf.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function writeBigVarint(e,t){var r,n;e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function writeBigVarintLow(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}(r,0,t),function writeBigVarintHigh(e,t){var r=(7&e)<<4;if(t.buf[t.pos++]|=r|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function writeUtf8(e,t,r){for(var n,o,a=0;a<t.length;a++){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){n>56319||a+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):o=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(e[r++]=239,e[r++]=191,e[r++]=189,o=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&makeRoomForExtraLength(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),n.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),n.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&makeRoomForExtraLength(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Pbf.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){this.writeMessage(e,writePackedVarint,t)},writePackedSVarint:function(e,t){this.writeMessage(e,writePackedSVarint,t)},writePackedBoolean:function(e,t){this.writeMessage(e,writePackedBoolean,t)},writePackedFloat:function(e,t){this.writeMessage(e,writePackedFloat,t)},writePackedDouble:function(e,t){this.writeMessage(e,writePackedDouble,t)},writePackedFixed32:function(e,t){this.writeMessage(e,writePackedFixed32,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,writePackedSFixed32,t)},writePackedFixed64:function(e,t){this.writeMessage(e,writePackedFixed64,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,writePackedSFixed64,t)},writeBytesField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},function(e,t,r){var n=r(1),o=r(12),a=r(61),i=r(62);function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return e.exports=_wrapNativeSuper=function _wrapNativeSuper(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,Wrapper)}function Wrapper(){return i(e,arguments,n(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),o(Wrapper,e)},_wrapNativeSuper(t)}e.exports=_wrapNativeSuper},function(e,t,r){"use strict";function earcut(e,t,r){r=r||2;var n,o,a,i,s,u,c,f=t&&t.length,l=f?t[0]*r:e.length,h=linkedList(e,0,l,r,!0),d=[];if(!h)return d;if(f&&(h=function eliminateHoles(e,t,r,n){var o,a,i,s,u,c=[];for(o=0,a=t.length;o<a;o++)i=t[o]*n,s=o<a-1?t[o+1]*n:e.length,(u=linkedList(e,i,s,n,!1))===u.next&&(u.steiner=!0),c.push(getLeftmost(u));for(c.sort(compareX),o=0;o<c.length;o++)eliminateHole(c[o],r),r=filterPoints(r,r.next);return r}(e,t,h,r)),e.length>80*r){n=a=e[0],o=i=e[1];for(var p=r;p<l;p+=r)s=e[p],u=e[p+1],s<n&&(n=s),u<o&&(o=u),s>a&&(a=s),u>i&&(i=u);c=0!==(c=Math.max(a-n,i-o))?1/c:0}return earcutLinked(h,d,r,n,o,c),d}function linkedList(e,t,r,n,o){var a,i;if(o===signedArea(e,t,r,n)>0)for(a=t;a<r;a+=n)i=insertNode(a,e[a],e[a+1],i);else for(a=r-n;a>=t;a-=n)i=insertNode(a,e[a],e[a+1],i);return i&&equals(i,i.next)&&(removeNode(i),i=i.next),i}function filterPoints(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!equals(n,n.next)&&0!==area(n.prev,n,n.next))n=n.next;else{if(removeNode(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function earcutLinked(e,t,r,n,o,a,i){if(e){!i&&a&&function indexCurve(e,t,r,n){var o=e;do{null===o.z&&(o.z=zOrder(o.x,o.y,t,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function sortLinked(e){var t,r,n,o,a,i,s,u,c=1;do{for(r=e,e=null,a=null,i=0;r;){for(i++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(u=c;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(o=r,r=r.nextZ,s--):(o=n,n=n.nextZ,u--),a?a.nextZ=o:e=o,o.prevZ=a,a=o;r=n}a.nextZ=null,c*=2}while(i>1);return e}(o)}(e,n,o,a);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?isEarHashed(e,n,o,a):isEar(e))t.push(s.i/r),t.push(e.i/r),t.push(u.i/r),removeNode(e),e=u.next,c=u.next;else if((e=u)===c){i?1===i?earcutLinked(e=cureLocalIntersections(e,t,r),t,r,n,o,a,2):2===i&&splitEarcut(e,t,r,n,o,a):earcutLinked(filterPoints(e),t,r,n,o,a,1);break}}}function isEar(e){var t=e.prev,r=e,n=e.next;if(area(t,r,n)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(pointInTriangle(t.x,t.y,r.x,r.y,n.x,n.y,o.x,o.y)&&area(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function isEarHashed(e,t,r,n){var o=e.prev,a=e,i=e.next;if(area(o,a,i)>=0)return!1;for(var s=o.x<a.x?o.x<i.x?o.x:i.x:a.x<i.x?a.x:i.x,u=o.y<a.y?o.y<i.y?o.y:i.y:a.y<i.y?a.y:i.y,c=o.x>a.x?o.x>i.x?o.x:i.x:a.x>i.x?a.x:i.x,f=o.y>a.y?o.y>i.y?o.y:i.y:a.y>i.y?a.y:i.y,l=zOrder(s,u,t,r,n),h=zOrder(c,f,t,r,n),d=e.prevZ,p=e.nextZ;d&&d.z>=l&&p&&p.z<=h;){if(d!==e.prev&&d!==e.next&&pointInTriangle(o.x,o.y,a.x,a.y,i.x,i.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&pointInTriangle(o.x,o.y,a.x,a.y,i.x,i.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=l;){if(d!==e.prev&&d!==e.next&&pointInTriangle(o.x,o.y,a.x,a.y,i.x,i.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&pointInTriangle(o.x,o.y,a.x,a.y,i.x,i.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function cureLocalIntersections(e,t,r){var n=e;do{var o=n.prev,a=n.next.next;!equals(o,a)&&intersects(o,n,n.next,a)&&locallyInside(o,a)&&locallyInside(a,o)&&(t.push(o.i/r),t.push(n.i/r),t.push(a.i/r),removeNode(n),removeNode(n.next),n=e=a),n=n.next}while(n!==e);return n}function splitEarcut(e,t,r,n,o,a){var i=e;do{for(var s=i.next.next;s!==i.prev;){if(i.i!==s.i&&isValidDiagonal(i,s)){var u=splitPolygon(i,s);return i=filterPoints(i,i.next),u=filterPoints(u,u.next),earcutLinked(i,t,r,n,o,a),void earcutLinked(u,t,r,n,o,a)}s=s.next}i=i.next}while(i!==e)}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=function findHoleBridge(e,t){var r,n=t,o=e.x,a=e.y,i=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=o&&s>i){if(i=s,s===o){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(o===i)return r.prev;var u,c=r,f=r.x,l=r.y,h=1/0;n=r.next;for(;n!==c;)o>=n.x&&n.x>=f&&o!==n.x&&pointInTriangle(a<l?o:i,a,f,l,a<l?i:o,a,n.x,n.y)&&((u=Math.abs(a-n.y)/(o-n.x))<h||u===h&&n.x>r.x)&&locallyInside(n,e)&&(r=n,h=u),n=n.next;return r}(e,t)){var r=splitPolygon(t,e);filterPoints(r,r.next)}}function zOrder(e,t,r,n,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function getLeftmost(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function pointInTriangle(e,t,r,n,o,a,i,s){return(o-i)*(t-s)-(e-i)*(a-s)>=0&&(e-i)*(n-s)-(r-i)*(t-s)>=0&&(r-i)*(a-s)-(o-i)*(n-s)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&function middleInside(e,t){var r=e,n=!1,o=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&o<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,n){return!!(equals(e,t)&&equals(r,n)||equals(e,n)&&equals(r,t))||area(e,t,r)>0!=area(e,t,n)>0&&area(r,n,e)>0!=area(r,n,t)>0}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),n=new Node(t.i,t.x,t.y),o=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=o,o.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function insertNode(e,t,r,n){var o=new Node(e,t,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,r,n){for(var o=0,a=t,i=r-n;a<r;a+=n)o+=(e[i]-e[a])*(e[a+1]+e[i+1]),i=a;return o}e.exports=earcut,e.exports.default=earcut,earcut.deviation=function(e,t,r,n){var o=t&&t.length,a=o?t[0]*r:e.length,i=Math.abs(signedArea(e,0,a,r));if(o)for(var s=0,u=t.length;s<u;s++){var c=t[s]*r,f=s<u-1?t[s+1]*r:e.length;i-=Math.abs(signedArea(e,c,f,r))}var l=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;l+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===i&&0===l?0:Math.abs((l-i)/i)},earcut.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,o=0;o<e.length;o++){for(var a=0;a<e[o].length;a++)for(var i=0;i<t;i++)r.vertices.push(e[o][a][i]);o>0&&(n+=e[o-1].length,r.holes.push(n))}return r}},,,,,,,,function(e,t){e.exports=function _arrayWithHoles(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function _iterableToArrayLimit(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}},function(e,t){e.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(39),o)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c="object"==typeof e,f=t.regeneratorRuntime;if(f)c&&(e.exports=f);else{(f=t.regeneratorRuntime=c?e.exports:{}).wrap=wrap;var l="suspendedStart",h="suspendedYield",d="executing",p="completed",y={},m={};m[i]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(values([])));g&&g!==n&&o.call(g,i)&&(m=g);var x=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(m);GeneratorFunction.prototype=x.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[u]=GeneratorFunction.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(x),e},f.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[s]=function(){return this},f.AsyncIterator=AsyncIterator,f.async=function(e,t,r,n){var o=new AsyncIterator(wrap(e,t,r,n));return f.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},defineIteratorMethods(x),x[u]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function next(){for(;t.length;){var r=t.pop();if(r in e)return next.value=r,next.done=!1,next}return next.done=!0,next}},f.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,o){return i.type="throw",i.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function wrap(e,t,r,n){var o=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(o.prototype),i=new Context(n||[]);return a._invoke=function makeInvokeMethod(e,t,r){var n=l;return function invoke(o,a){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw a;return doneResult()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=maybeInvokeDelegate(i,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=tryCatch(e,t,r);if("normal"===u.type){if(n=r.done?p:h,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(e,r,i),a}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function AsyncIterator(e){var t;this._invoke=function enqueue(r,n){function callInvokeWithMethodAndArg(){return new Promise(function(t,a){!function invoke(t,r,n,a){var i=tryCatch(e[t],e,r);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==typeof u&&o.call(u,"__await")?Promise.resolve(u.__await).then(function(e){invoke("next",e,n,a)},function(e){invoke("throw",e,n,a)}):Promise.resolve(u).then(function(e){s.value=e,n(s)},function(e){return invoke("throw",e,n,a)})}a(i.arg)}(r,n,t,a)})}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,maybeInvokeDelegate(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=tryCatch(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,y;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function next(){for(;++n<e.length;)if(o.call(e,n))return next.value=e[n],next.done=!1,next;return next.value=r,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,r){"use strict";var n=r(14);function readTile(e,t,r){if(3===e){var o=new n(r,r.readVarint()+r.pos);o.length&&(t[o.name]=o)}}e.exports=function VectorTile(e,t){this.layers=e.readFields(readTile,{},t)}},function(e,t,r){"use strict";function Point(e,t){this.x=e,this.y=t}e.exports=Point,Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,o=r*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),o=t.x+r*(this.x-t.x)-n*(this.y-t.y),a=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=o,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(e){return e instanceof Point?e:Array.isArray(e)?new Point(e[0],e[1]):e}},function(e,t){t.read=function(e,t,r,n,o){var a,i,s=8*o-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=r?o-1:0,h=r?-1:1,d=e[t+l];for(l+=h,a=d&(1<<-f)-1,d>>=-f,f+=s;f>0;a=256*a+e[t+l],l+=h,f-=8);for(i=a&(1<<-f)-1,a>>=-f,f+=n;f>0;i=256*i+e[t+l],l+=h,f-=8);if(0===a)a=1-c;else{if(a===u)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,n),a-=c}return(d?-1:1)*i*Math.pow(2,a-n)},t.write=function(e,t,r,n,o,a){var i,s,u,c=8*a-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=f):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(i++,u/=2),i+l>=f?(s=0,i=f):i+l>=1?(s=(t*u-1)*Math.pow(2,o),i+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),i=0));o>=8;e[r+d]=255&s,d+=p,s/=256,o-=8);for(i=i<<o|s,c+=o;c>0;e[r+d]=255&i,d+=p,i/=256,c-=8);e[r+d-p]|=128*y}},function(e,t,r){"use strict";var n=r(6),o=r(16),a=r(45),i=r(22);function createInstance(e){var t=new a(e),r=o(a.prototype.request,t);return n.extend(r,a.prototype,t),n.extend(r,t),r}var s=createInstance(r(19));s.Axios=a,s.create=function create(e){return createInstance(i(s.defaults,e))},s.Cancel=r(23),s.CancelToken=r(58),s.isCancel=r(18),s.all=function all(e){return Promise.all(e)},s.spread=r(59),e.exports=s,e.exports.default=s},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function isBuffer(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,r){"use strict";var n=r(6),o=r(17),a=r(46),i=r(47),s=r(22);function Axios(e){this.defaults=e,this.interceptors={request:new a,response:new a}}Axios.prototype.request=function request(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function unshiftRequestInterceptors(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function pushResponseInterceptors(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},Axios.prototype.getUri=function getUri(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function forEachMethodNoData(e){Axios.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}}),n.forEach(["post","put","patch"],function forEachMethodWithData(e){Axios.prototype[e]=function(t,r,o){return this.request(n.merge(o||{},{method:e,url:t,data:r}))}}),e.exports=Axios},function(e,t,r){"use strict";var n=r(6);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function forEach(e){n.forEach(this.handlers,function forEachHandler(t){null!==t&&e(t)})},e.exports=InterceptorManager},function(e,t,r){"use strict";var n=r(6),o=r(48),a=r(18),i=r(19),s=r(56),u=r(57);function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function dispatchRequest(e){return throwIfCancellationRequested(e),e.baseURL&&!s(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function onAdapterResolution(t){return throwIfCancellationRequested(e),t.data=o(t.data,t.headers,e.transformResponse),t},function onAdapterRejection(t){return a(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(6);e.exports=function transformData(e,t,r){return n.forEach(r,function transform(r){e=r(e,t)}),e}},function(e,t){var r,n,o=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var a,i=[],s=!1,u=-1;function cleanUpNextTick(){s&&a&&(s=!1,a.length?i=a.concat(i):u=-1,i.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=i.length;t;){for(a=i,i=[];++u<t;)a&&a[u].run();u=-1,t=i.length}a=null,s=!1,function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new Item(e,t)),1!==i.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(6);e.exports=function normalizeHeaderName(e,t){n.forEach(e,function processHeader(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(21);e.exports=function settle(e,t,r){var o=r.config.validateStatus;!o||o(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function enhanceError(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(6),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function parseHeaders(e){var t,r,a,i={};return e?(n.forEach(e.split("\n"),function parser(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";var n=r(6);e.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function resolveURL(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=resolveURL(window.location.href),function isURLSameOrigin(t){var r=n.isString(t)?resolveURL(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function isURLSameOrigin(){return!0}},function(e,t,r){"use strict";var n=r(6);e.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(e,t,r,o,a,i){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function read(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function remove(e){this.write(e,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},function(e,t,r){"use strict";e.exports=function isAbsoluteURL(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(23);function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function promiseExecutor(e){t=e});var r=this;e(function cancel(e){r.reason||(r.reason=new n(e),t(r.reason))})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var e;return{token:new CancelToken(function executor(t){e=t}),cancel:e}},e.exports=CancelToken},function(e,t,r){"use strict";e.exports=function spread(e){return function wrap(t){return e.apply(null,t)}}},function(e,t){e.exports=function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,r){var n=r(12);function _construct(t,r,o){return!function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=_construct=function _construct(e,t,r){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return r&&n(a,r.prototype),a}:e.exports=_construct=Reflect.construct,_construct.apply(null,arguments)}e.exports=_construct},function(e,t,r){var n=r(1);e.exports=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t){e.exports=function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t){e.exports=function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"create",function(){return create}),r.d(n,"clone",function(){return clone}),r.d(n,"copy",function(){return copy}),r.d(n,"fromValues",function(){return fromValues}),r.d(n,"set",function(){return set}),r.d(n,"identity",function(){return identity}),r.d(n,"transpose",function(){return transpose}),r.d(n,"invert",function(){return invert}),r.d(n,"adjoint",function(){return adjoint}),r.d(n,"determinant",function(){return determinant}),r.d(n,"multiply",function(){return multiply}),r.d(n,"translate",function(){return translate}),r.d(n,"scale",function(){return mat4_scale}),r.d(n,"rotate",function(){return rotate}),r.d(n,"rotateX",function(){return rotateX}),r.d(n,"rotateY",function(){return rotateY}),r.d(n,"rotateZ",function(){return rotateZ}),r.d(n,"fromTranslation",function(){return fromTranslation}),r.d(n,"fromScaling",function(){return fromScaling}),r.d(n,"fromRotation",function(){return fromRotation}),r.d(n,"fromXRotation",function(){return fromXRotation}),r.d(n,"fromYRotation",function(){return fromYRotation}),r.d(n,"fromZRotation",function(){return fromZRotation}),r.d(n,"fromRotationTranslation",function(){return fromRotationTranslation}),r.d(n,"fromQuat2",function(){return fromQuat2}),r.d(n,"getTranslation",function(){return getTranslation}),r.d(n,"getScaling",function(){return getScaling}),r.d(n,"getRotation",function(){return getRotation}),r.d(n,"fromRotationTranslationScale",function(){return fromRotationTranslationScale}),r.d(n,"fromRotationTranslationScaleOrigin",function(){return fromRotationTranslationScaleOrigin}),r.d(n,"fromQuat",function(){return fromQuat}),r.d(n,"frustum",function(){return frustum}),r.d(n,"perspective",function(){return perspective}),r.d(n,"perspectiveFromFieldOfView",function(){return perspectiveFromFieldOfView}),r.d(n,"ortho",function(){return ortho}),r.d(n,"lookAt",function(){return lookAt}),r.d(n,"targetTo",function(){return targetTo}),r.d(n,"str",function(){return str}),r.d(n,"frob",function(){return frob}),r.d(n,"add",function(){return add}),r.d(n,"subtract",function(){return subtract}),r.d(n,"multiplyScalar",function(){return multiplyScalar}),r.d(n,"multiplyScalarAndAdd",function(){return multiplyScalarAndAdd}),r.d(n,"exactEquals",function(){return exactEquals}),r.d(n,"equals",function(){return mat4_equals}),r.d(n,"mul",function(){return b}),r.d(n,"sub",function(){return M});var o={};r.r(o),r.d(o,"create",function(){return vec4_create}),r.d(o,"clone",function(){return vec4_clone}),r.d(o,"fromValues",function(){return vec4_fromValues}),r.d(o,"copy",function(){return vec4_copy}),r.d(o,"set",function(){return vec4_set}),r.d(o,"add",function(){return vec4_add}),r.d(o,"subtract",function(){return vec4_subtract}),r.d(o,"multiply",function(){return vec4_multiply}),r.d(o,"divide",function(){return divide}),r.d(o,"ceil",function(){return ceil}),r.d(o,"floor",function(){return floor}),r.d(o,"min",function(){return vec4_min}),r.d(o,"max",function(){return vec4_max}),r.d(o,"round",function(){return round}),r.d(o,"scale",function(){return vec4_scale}),r.d(o,"scaleAndAdd",function(){return scaleAndAdd}),r.d(o,"distance",function(){return distance}),r.d(o,"squaredDistance",function(){return squaredDistance}),r.d(o,"length",function(){return vec4_length}),r.d(o,"squaredLength",function(){return squaredLength}),r.d(o,"negate",function(){return negate}),r.d(o,"inverse",function(){return inverse}),r.d(o,"normalize",function(){return normalize}),r.d(o,"dot",function(){return dot}),r.d(o,"lerp",function(){return lerp}),r.d(o,"random",function(){return random}),r.d(o,"transformMat4",function(){return transformMat4}),r.d(o,"transformQuat",function(){return transformQuat}),r.d(o,"str",function(){return vec4_str}),r.d(o,"exactEquals",function(){return vec4_exactEquals}),r.d(o,"equals",function(){return vec4_equals}),r.d(o,"sub",function(){return T}),r.d(o,"mul",function(){return P}),r.d(o,"div",function(){return k}),r.d(o,"dist",function(){return C}),r.d(o,"sqrDist",function(){return E}),r.d(o,"len",function(){return I}),r.d(o,"sqrLen",function(){return S}),r.d(o,"forEach",function(){return N});var a=r(5),i=r.n(a),s=r(10),u=r.n(s),c=r(11),f=r.n(c),l=r(0),h=r.n(l),d=r(2),p=r.n(d),y=r(24),m=r(25);function getRsysFromTile(e,t,r){return{center:{x:(e+.5)/Math.pow(2,r)*2-1,y:2*(1-(t+.5)/Math.pow(2,r))-1},scale:1/Math.pow(2,r)}}var v=r(7),g=r.n(v),x=1e-6,w="undefined"!=typeof Float32Array?Float32Array:Array,_=Math.random;Math.PI;function create(){var e=new w(16);return w!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function clone(e){var t=new w(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function fromValues(e,t,r,n,o,a,i,s,u,c,f,l,h,d,p,y){var m=new w(16);return m[0]=e,m[1]=t,m[2]=r,m[3]=n,m[4]=o,m[5]=a,m[6]=i,m[7]=s,m[8]=u,m[9]=c,m[10]=f,m[11]=l,m[12]=h,m[13]=d,m[14]=p,m[15]=y,m}function set(e,t,r,n,o,a,i,s,u,c,f,l,h,d,p,y,m){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=a,e[5]=i,e[6]=s,e[7]=u,e[8]=c,e[9]=f,e[10]=l,e[11]=h,e[12]=d,e[13]=p,e[14]=y,e[15]=m,e}function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function transpose(e,t){if(e===t){var r=t[1],n=t[2],o=t[3],a=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function invert(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],y=t[13],m=t[14],v=t[15],g=r*s-n*i,x=r*u-o*i,w=r*c-a*i,_=n*u-o*s,b=n*c-a*s,M=o*c-a*u,T=f*y-l*p,P=f*m-h*p,k=f*v-d*p,C=l*m-h*y,E=l*v-d*y,I=h*v-d*m,S=g*I-x*E+w*C+_*k-b*P+M*T;return S?(S=1/S,e[0]=(s*I-u*E+c*C)*S,e[1]=(o*E-n*I-a*C)*S,e[2]=(y*M-m*b+v*_)*S,e[3]=(h*b-l*M-d*_)*S,e[4]=(u*k-i*I-c*P)*S,e[5]=(r*I-o*k+a*P)*S,e[6]=(m*w-p*M-v*x)*S,e[7]=(f*M-h*w+d*x)*S,e[8]=(i*E-s*k+c*T)*S,e[9]=(n*k-r*E-a*T)*S,e[10]=(p*b-y*w+v*g)*S,e[11]=(l*w-f*b-d*g)*S,e[12]=(s*P-i*C-u*T)*S,e[13]=(r*C-n*P+o*T)*S,e[14]=(y*x-p*_-m*g)*S,e[15]=(f*_-l*x+h*g)*S,e):null}function adjoint(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],y=t[13],m=t[14],v=t[15];return e[0]=s*(h*v-d*m)-l*(u*v-c*m)+y*(u*d-c*h),e[1]=-(n*(h*v-d*m)-l*(o*v-a*m)+y*(o*d-a*h)),e[2]=n*(u*v-c*m)-s*(o*v-a*m)+y*(o*c-a*u),e[3]=-(n*(u*d-c*h)-s*(o*d-a*h)+l*(o*c-a*u)),e[4]=-(i*(h*v-d*m)-f*(u*v-c*m)+p*(u*d-c*h)),e[5]=r*(h*v-d*m)-f*(o*v-a*m)+p*(o*d-a*h),e[6]=-(r*(u*v-c*m)-i*(o*v-a*m)+p*(o*c-a*u)),e[7]=r*(u*d-c*h)-i*(o*d-a*h)+f*(o*c-a*u),e[8]=i*(l*v-d*y)-f*(s*v-c*y)+p*(s*d-c*l),e[9]=-(r*(l*v-d*y)-f*(n*v-a*y)+p*(n*d-a*l)),e[10]=r*(s*v-c*y)-i*(n*v-a*y)+p*(n*c-a*s),e[11]=-(r*(s*d-c*l)-i*(n*d-a*l)+f*(n*c-a*s)),e[12]=-(i*(l*m-h*y)-f*(s*m-u*y)+p*(s*h-u*l)),e[13]=r*(l*m-h*y)-f*(n*m-o*y)+p*(n*h-o*l),e[14]=-(r*(s*m-u*y)-i*(n*m-o*y)+p*(n*u-o*s)),e[15]=r*(s*h-u*l)-i*(n*h-o*l)+f*(n*u-o*s),e}function determinant(e){var t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],i=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11],d=e[12],p=e[13],y=e[14],m=e[15];return(t*i-r*a)*(l*m-h*y)-(t*s-n*a)*(f*m-h*p)+(t*u-o*a)*(f*y-l*p)+(r*s-n*i)*(c*m-h*d)-(r*u-o*i)*(c*y-l*d)+(n*u-o*s)*(c*p-f*d)}function multiply(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=t[9],d=t[10],p=t[11],y=t[12],m=t[13],v=t[14],g=t[15],x=r[0],w=r[1],_=r[2],b=r[3];return e[0]=x*n+w*s+_*l+b*y,e[1]=x*o+w*u+_*h+b*m,e[2]=x*a+w*c+_*d+b*v,e[3]=x*i+w*f+_*p+b*g,x=r[4],w=r[5],_=r[6],b=r[7],e[4]=x*n+w*s+_*l+b*y,e[5]=x*o+w*u+_*h+b*m,e[6]=x*a+w*c+_*d+b*v,e[7]=x*i+w*f+_*p+b*g,x=r[8],w=r[9],_=r[10],b=r[11],e[8]=x*n+w*s+_*l+b*y,e[9]=x*o+w*u+_*h+b*m,e[10]=x*a+w*c+_*d+b*v,e[11]=x*i+w*f+_*p+b*g,x=r[12],w=r[13],_=r[14],b=r[15],e[12]=x*n+w*s+_*l+b*y,e[13]=x*o+w*u+_*h+b*m,e[14]=x*a+w*c+_*d+b*v,e[15]=x*i+w*f+_*p+b*g,e}function translate(e,t,r){var n=r[0],o=r[1],a=r[2],i=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,p=void 0,y=void 0,m=void 0,v=void 0;return t===e?(e[12]=t[0]*n+t[4]*o+t[8]*a+t[12],e[13]=t[1]*n+t[5]*o+t[9]*a+t[13],e[14]=t[2]*n+t[6]*o+t[10]*a+t[14],e[15]=t[3]*n+t[7]*o+t[11]*a+t[15]):(i=t[0],s=t[1],u=t[2],c=t[3],f=t[4],l=t[5],h=t[6],d=t[7],p=t[8],y=t[9],m=t[10],v=t[11],e[0]=i,e[1]=s,e[2]=u,e[3]=c,e[4]=f,e[5]=l,e[6]=h,e[7]=d,e[8]=p,e[9]=y,e[10]=m,e[11]=v,e[12]=i*n+f*o+p*a+t[12],e[13]=s*n+l*o+y*a+t[13],e[14]=u*n+h*o+m*a+t[14],e[15]=c*n+d*o+v*a+t[15]),e}function mat4_scale(e,t,r){var n=r[0],o=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rotate(e,t,r,n){var o,a,i,s,u,c,f,l,h,d,p,y,m,v,g,w,_,b,M,T,P,k,C,E,I=n[0],S=n[1],N=n[2],F=Math.sqrt(I*I+S*S+N*N);return F<x?null:(I*=F=1/F,S*=F,N*=F,o=Math.sin(r),i=1-(a=Math.cos(r)),s=t[0],u=t[1],c=t[2],f=t[3],l=t[4],h=t[5],d=t[6],p=t[7],y=t[8],m=t[9],v=t[10],g=t[11],w=I*I*i+a,_=S*I*i+N*o,b=N*I*i-S*o,M=I*S*i-N*o,T=S*S*i+a,P=N*S*i+I*o,k=I*N*i+S*o,C=S*N*i-I*o,E=N*N*i+a,e[0]=s*w+l*_+y*b,e[1]=u*w+h*_+m*b,e[2]=c*w+d*_+v*b,e[3]=f*w+p*_+g*b,e[4]=s*M+l*T+y*P,e[5]=u*M+h*T+m*P,e[6]=c*M+d*T+v*P,e[7]=f*M+p*T+g*P,e[8]=s*k+l*C+y*E,e[9]=u*k+h*C+m*E,e[10]=c*k+d*C+v*E,e[11]=f*k+p*C+g*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function rotateX(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[4],i=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+c*n,e[5]=i*o+f*n,e[6]=s*o+l*n,e[7]=u*o+h*n,e[8]=c*o-a*n,e[9]=f*o-i*n,e[10]=l*o-s*n,e[11]=h*o-u*n,e}function rotateY(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[0],i=t[1],s=t[2],u=t[3],c=t[8],f=t[9],l=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-c*n,e[1]=i*o-f*n,e[2]=s*o-l*n,e[3]=u*o-h*n,e[8]=a*n+c*o,e[9]=i*n+f*o,e[10]=s*n+l*o,e[11]=u*n+h*o,e}function rotateZ(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[0],i=t[1],s=t[2],u=t[3],c=t[4],f=t[5],l=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+c*n,e[1]=i*o+f*n,e[2]=s*o+l*n,e[3]=u*o+h*n,e[4]=c*o-a*n,e[5]=f*o-i*n,e[6]=l*o-s*n,e[7]=h*o-u*n,e}function fromTranslation(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromRotation(e,t,r){var n,o,a,i=r[0],s=r[1],u=r[2],c=Math.sqrt(i*i+s*s+u*u);return c<x?null:(i*=c=1/c,s*=c,u*=c,n=Math.sin(t),a=1-(o=Math.cos(t)),e[0]=i*i*a+o,e[1]=s*i*a+u*n,e[2]=u*i*a-s*n,e[3]=0,e[4]=i*s*a-u*n,e[5]=s*s*a+o,e[6]=u*s*a+i*n,e[7]=0,e[8]=i*u*a+s*n,e[9]=s*u*a-i*n,e[10]=u*u*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function fromXRotation(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromYRotation(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromZRotation(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromRotationTranslation(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],s=n+n,u=o+o,c=a+a,f=n*s,l=n*u,h=n*c,d=o*u,p=o*c,y=a*c,m=i*s,v=i*u,g=i*c;return e[0]=1-(d+y),e[1]=l+g,e[2]=h-v,e[3]=0,e[4]=l-g,e[5]=1-(f+y),e[6]=p+m,e[7]=0,e[8]=h+v,e[9]=p-m,e[10]=1-(f+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function fromQuat2(e,t){var r=new w(3),n=-t[0],o=-t[1],a=-t[2],i=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=n*n+o*o+a*a+i*i;return l>0?(r[0]=2*(s*i+f*n+u*a-c*o)/l,r[1]=2*(u*i+f*o+c*n-s*a)/l,r[2]=2*(c*i+f*a+s*o-u*n)/l):(r[0]=2*(s*i+f*n+u*a-c*o),r[1]=2*(u*i+f*o+c*n-s*a),r[2]=2*(c*i+f*a+s*o-u*n)),fromRotationTranslation(e,t,r),e}function getTranslation(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function getScaling(e,t){var r=t[0],n=t[1],o=t[2],a=t[4],i=t[5],s=t[6],u=t[8],c=t[9],f=t[10];return e[0]=Math.sqrt(r*r+n*n+o*o),e[1]=Math.sqrt(a*a+i*i+s*s),e[2]=Math.sqrt(u*u+c*c+f*f),e}function getRotation(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function fromRotationTranslationScale(e,t,r,n){var o=t[0],a=t[1],i=t[2],s=t[3],u=o+o,c=a+a,f=i+i,l=o*u,h=o*c,d=o*f,p=a*c,y=a*f,m=i*f,v=s*u,g=s*c,x=s*f,w=n[0],_=n[1],b=n[2];return e[0]=(1-(p+m))*w,e[1]=(h+x)*w,e[2]=(d-g)*w,e[3]=0,e[4]=(h-x)*_,e[5]=(1-(l+m))*_,e[6]=(y+v)*_,e[7]=0,e[8]=(d+g)*b,e[9]=(y-v)*b,e[10]=(1-(l+p))*b,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function fromRotationTranslationScaleOrigin(e,t,r,n,o){var a=t[0],i=t[1],s=t[2],u=t[3],c=a+a,f=i+i,l=s+s,h=a*c,d=a*f,p=a*l,y=i*f,m=i*l,v=s*l,g=u*c,x=u*f,w=u*l,_=n[0],b=n[1],M=n[2],T=o[0],P=o[1],k=o[2],C=(1-(y+v))*_,E=(d+w)*_,I=(p-x)*_,S=(d-w)*b,N=(1-(h+v))*b,F=(m+g)*b,V=(p+x)*M,A=(m-g)*M,R=(1-(h+y))*M;return e[0]=C,e[1]=E,e[2]=I,e[3]=0,e[4]=S,e[5]=N,e[6]=F,e[7]=0,e[8]=V,e[9]=A,e[10]=R,e[11]=0,e[12]=r[0]+T-(C*T+S*P+V*k),e[13]=r[1]+P-(E*T+N*P+A*k),e[14]=r[2]+k-(I*T+F*P+R*k),e[15]=1,e}function fromQuat(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r+r,s=n+n,u=o+o,c=r*i,f=n*i,l=n*s,h=o*i,d=o*s,p=o*u,y=a*i,m=a*s,v=a*u;return e[0]=1-l-p,e[1]=f+v,e[2]=h-m,e[3]=0,e[4]=f-v,e[5]=1-c-p,e[6]=d+y,e[7]=0,e[8]=h+m,e[9]=d-y,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function frustum(e,t,r,n,o,a,i){var s=1/(r-t),u=1/(o-n),c=1/(a-i);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(o+n)*u,e[10]=(i+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*c,e[15]=0,e}function perspective(e,t,r,n,o){var a=1/Math.tan(t/2),i=void 0;return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(i=1/(n-o),e[10]=(o+n)*i,e[14]=2*o*n*i):(e[10]=-1,e[14]=-2*n),e}function perspectiveFromFieldOfView(e,t,r,n){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(o+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(i-s)*u*.5,e[9]=(o-a)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function ortho(e,t,r,n,o,a,i){var s=1/(t-r),u=1/(n-o),c=1/(a-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(o+n)*u,e[14]=(i+a)*c,e[15]=1,e}function lookAt(e,t,r,n){var o=void 0,a=void 0,i=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,p=t[0],y=t[1],m=t[2],v=n[0],g=n[1],w=n[2],_=r[0],b=r[1],M=r[2];return Math.abs(p-_)<x&&Math.abs(y-b)<x&&Math.abs(m-M)<x?identity(e):(f=p-_,l=y-b,h=m-M,o=g*(h*=d=1/Math.sqrt(f*f+l*l+h*h))-w*(l*=d),a=w*(f*=d)-v*h,i=v*l-g*f,(d=Math.sqrt(o*o+a*a+i*i))?(o*=d=1/d,a*=d,i*=d):(o=0,a=0,i=0),s=l*i-h*a,u=h*o-f*i,c=f*a-l*o,(d=Math.sqrt(s*s+u*u+c*c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),e[0]=o,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=u,e[6]=l,e[7]=0,e[8]=i,e[9]=c,e[10]=h,e[11]=0,e[12]=-(o*p+a*y+i*m),e[13]=-(s*p+u*y+c*m),e[14]=-(f*p+l*y+h*m),e[15]=1,e)}function targetTo(e,t,r,n){var o=t[0],a=t[1],i=t[2],s=n[0],u=n[1],c=n[2],f=o-r[0],l=a-r[1],h=i-r[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var p=u*h-c*l,y=c*f-s*h,m=s*l-u*f;return(d=p*p+y*y+m*m)>0&&(p*=d=1/Math.sqrt(d),y*=d,m*=d),e[0]=p,e[1]=y,e[2]=m,e[3]=0,e[4]=l*m-h*y,e[5]=h*p-f*m,e[6]=f*y-l*p,e[7]=0,e[8]=f,e[9]=l,e[10]=h,e[11]=0,e[12]=o,e[13]=a,e[14]=i,e[15]=1,e}function str(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function frob(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function add(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function subtract(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function multiplyScalar(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function multiplyScalarAndAdd(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function mat4_equals(e,t){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],m=e[14],v=e[15],g=t[0],w=t[1],_=t[2],b=t[3],M=t[4],T=t[5],P=t[6],k=t[7],C=t[8],E=t[9],I=t[10],S=t[11],N=t[12],F=t[13],V=t[14],A=t[15];return Math.abs(r-g)<=x*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-w)<=x*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(o-_)<=x*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-b)<=x*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(i-M)<=x*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(s-T)<=x*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(u-P)<=x*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(c-k)<=x*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(f-C)<=x*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(l-E)<=x*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-I)<=x*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-S)<=x*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-N)<=x*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(y-F)<=x*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(m-V)<=x*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(v-A)<=x*Math.max(1,Math.abs(v),Math.abs(A))}var b=multiply,M=subtract;function vec4_create(){var e=new w(4);return w!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function vec4_clone(e){var t=new w(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function vec4_fromValues(e,t,r,n){var o=new w(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o}function vec4_copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function vec4_set(e,t,r,n,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e}function vec4_add(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function vec4_subtract(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function vec4_multiply(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function divide(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function ceil(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function floor(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function vec4_min(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function vec4_max(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function round(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function vec4_scale(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function scaleAndAdd(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function distance(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+n*n+o*o+a*a)}function squaredDistance(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return r*r+n*n+o*o+a*a}function vec4_length(e){var t=e[0],r=e[1],n=e[2],o=e[3];return Math.sqrt(t*t+r*r+n*n+o*o)}function squaredLength(e){var t=e[0],r=e[1],n=e[2],o=e[3];return t*t+r*r+n*n+o*o}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function inverse(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function normalize(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r*r+n*n+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=r*i,e[1]=n*i,e[2]=o*i,e[3]=a*i),e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function lerp(e,t,r,n){var o=t[0],a=t[1],i=t[2],s=t[3];return e[0]=o+n*(r[0]-o),e[1]=a+n*(r[1]-a),e[2]=i+n*(r[2]-i),e[3]=s+n*(r[3]-s),e}function random(e,t){var r,n,o,a,i,s;t=t||1;do{i=(r=2*_()-1)*r+(n=2*_()-1)*n}while(i>=1);do{s=(o=2*_()-1)*o+(a=2*_()-1)*a}while(s>=1);var u=Math.sqrt((1-i)/s);return e[0]=t*r,e[1]=t*n,e[2]=t*o*u,e[3]=t*a*u,e}function transformMat4(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3];return e[0]=r[0]*n+r[4]*o+r[8]*a+r[12]*i,e[1]=r[1]*n+r[5]*o+r[9]*a+r[13]*i,e[2]=r[2]*n+r[6]*o+r[10]*a+r[14]*i,e[3]=r[3]*n+r[7]*o+r[11]*a+r[15]*i,e}function transformQuat(e,t,r){var n=t[0],o=t[1],a=t[2],i=r[0],s=r[1],u=r[2],c=r[3],f=c*n+s*a-u*o,l=c*o+u*n-i*a,h=c*a+i*o-s*n,d=-i*n-s*o-u*a;return e[0]=f*c+d*-i+l*-u-h*-s,e[1]=l*c+d*-s+h*-i-f*-u,e[2]=h*c+d*-u+f*-s-l*-i,e[3]=t[3],e}function vec4_str(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function vec4_exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function vec4_equals(e,t){var r=e[0],n=e[1],o=e[2],a=e[3],i=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(r-i)<=x*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=x*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=x*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=x*Math.max(1,Math.abs(a),Math.abs(c))}var T=vec4_subtract,P=vec4_multiply,k=divide,C=distance,E=squaredDistance,I=vec4_length,S=squaredLength,N=function(){var e=vec4_create();return function(t,r,n,o,a,i){var s=void 0,u=void 0;for(r||(r=4),n||(n=0),u=o?Math.min(o*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),F=function average(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length},V=r(3),A=r.n(V),R=r(1),O=r.n(R),D=r(4),L=r.n(D),q=r(26),B=function(e){function CartoError(e){var t;if(h()(this,CartoError),!e)throw Error("Invalid CartoError, a message is mandatory");if(!e.message)throw Error("Invalid CartoError, a message is mandatory");if(!e.type)throw Error("Invalid CartoError, a type is mandatory");return(t=A()(this,O()(CartoError).call(this,"".concat(e.type," ").concat(e.message)))).name="CartoError",t.type=e.type,t.originalError=e,t}return L()(CartoError,e),CartoError}(r.n(q)()(Error)),j=function(e){function CartoValidationError(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.DEFAULT;return h()(this,CartoValidationError),(t=A()(this,O()(CartoValidationError).call(this,{message:e,type:r}))).name="CartoValidationError",t}return L()(CartoValidationError,e),CartoValidationError}(B),U={DEFAULT:"[Error]",MISSING_REQUIRED:"[Missing required property]",INCORRECT_TYPE:"[Property with an incorrect type]",INCORRECT_VALUE:"[Incorrect value]",TOO_MANY_ARGS:"[Too many arguments]",NOT_ENOUGH_ARGS:"[Not enough arguments]",WRONG_NUMBER_ARGS:"[Wrong number of arguments]"},W={UNKNOWN:"unknown",POINT:"point",LINE:"line",POLYGON:"polygon"};function geometry_sub(e,t){var r=i()(e,2),n=r[0],o=r[1],a=i()(t,2);return[n-a[0],o-a[1]]}function geometry_dot(e,t){var r=i()(e,2),n=r[0],o=r[1],a=i()(t,2);return n*a[0]+o*a[1]}function perpendicular(e){var t=i()(e,2),r=t[0];return[-t[1],r]}function getLineNormal(e,t){var r=function geometry_normalize(e,t){var r=Math.hypot(e,t);return[e/r,t/r]}(e[0]-t[0],e[1]-t[1]);return[-r[1],r[0]]}function getJoinNormal(e,t){var r=[e[1],-e[0]],n=[-t[1],t[0]],o=n[0]*r[1]-n[1]*r[0],a=n[0]*r[0]+n[1]*r[1],i=Math.abs(o);return{turnLeft:o>0,joinNormal:!(i<.866&&a>.5)&&neg([(r[0]+n[0])/i,(r[1]+n[1])/i])}}function neg(e){return[-e[0],-e[1]]}function halfPlaneSign(e,t,r){return(e.x-r.x)*(t.y-r.y)-(t.x-r.x)*(e.y-r.y)}function equalPoints(e,t){return e.x===t.x&&e.y===t.y}function computeCentroids(e,t){switch(t){case W.POINT:return function _computeCentroidsForPoints(e){for(var t=[],r=0;r<e.vertices.length/6;r++){var n=6*r,o=n+6,a=e.vertices.slice(n,o),s=i()(a,6),u=s[4],c=s[5];t.push({x:u,y:c})}return t}(e);case W.LINE:case W.POLYGON:return function _computeCentroidsForLinesOrPolygons(e,t){var r=[],n=0;return e.breakpoints.forEach(function(o){var a=e.vertices.slice(n,o),s=null;s=t===W.LINE?function _centroidForLines(e){for(var t=[],r=[],n=0;n<e.length/6;n++){var o=6*n,a=o+6,s=e.slice(o,a),u=i()(s,6),c=u[0],f=u[1],l=u[2],h=u[3],d=u[4],p=u[5],y=c===l&&f===h,m=l===d&&h===p;if(!y||!m){var v=[c,f],g=y?[d,p]:[l,h];t.push(v[0]),t.push(g[0]),r.push(v[1]),r.push(g[1])}}return{x:F(t),y:F(r)}}(a):function _centroidForPolygons(e){for(var t=[],r=[],n=[],o=0;o<e.length/6;o++){var a=6*o,s=a+6,u=e.slice(a,s),c=i()(u,6),f=c[0],l=c[1],h=c[2],d=c[3],p=c[4],y=c[5],m=[[f,l],[h,d],[p,y]],v=triangleArea(m);if(v>0){var g=F([f,h,p]),x=F([l,d,y]);t.push(g*v),r.push(x*v),n.push(v)}}var w=_sumArray(n);return{x:_sumArray(t)/w,y:_sumArray(r)/w}}(a),r.push(s),n=o}),r}(e,t);default:throw new j("Invalid type argument, decoded geometry must have a point, line or polygon type.",U.INCORRECT_VALUE)}}function _sumArray(e){return e.reduce(function(e,t){return e+t},0)}function triangleArea(e){var t=i()(e[0],2),r=t[0],n=t[1],o=i()(e[1],2),a=o[0],s=o[1],u=i()(e[2],2),c=u[0],f=u[1];return Math.abs((r-c)*(s-n)-(r-a)*(f-n))/2}function _updateAABBForGeometry(e,t,r){switch(r){case W.LINE:return function _updateAABBLine(e,t){for(var r=e,n=e.length,o=0;o<n;o+=2)t.minx=Math.min(t.minx,r[o+0]),t.miny=Math.min(t.miny,r[o+1]),t.maxx=Math.max(t.maxx,r[o+0]),t.maxy=Math.max(t.maxy,r[o+1]);return t}(e,t);case W.POLYGON:return function _updateAABBPolygon(e,t){for(var r=[e.flat,e.holes[0]||e.flat.length/2],n=r[0],o=r[1],a=0;a<o;a++)t.minx=Math.min(t.minx,n[2*a+0]),t.miny=Math.min(t.miny,n[2*a+1]),t.maxx=Math.max(t.maxx,n[2*a+0]),t.maxy=Math.max(t.maxy,n[2*a+1]);return t}(e,t)}}var G={intersect:function geometry_intersect(e,t,r,n){var o=e,a=r,i=geometry_sub(t,e),s=geometry_sub(n,r),u=perpendicular(i),c=perpendicular(s),f=geometry_dot(geometry_sub(a,o),c)/geometry_dot(i,c),l=geometry_dot(geometry_sub(o,a),u)/geometry_dot(s,u);if(f>=0&&f<=1&&l>=0&&l<=1)return[o[0]+f*i[0],o[1]+f*i[1]]},sub:geometry_sub,dot:geometry_dot,perpendicular:perpendicular,getLineNormal:getLineNormal,getJoinNormal:getJoinNormal,neg:neg,halfPlaneSign:halfPlaneSign,pointInTriangle:function pointInTriangle(e,t,r,n){if(equalPoints(t,r)||equalPoints(r,n)||equalPoints(n,t))return!1;var o=halfPlaneSign(e,t,r)<0,a=halfPlaneSign(e,r,n)<0,i=halfPlaneSign(e,n,t)<0;return o===a&&a===i},equalPoints:equalPoints,pointInCircle:function pointInCircle(e,t,r){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o<=r*r},pointInRectangle:function pointInRectangle(e,t){if(null===t)return!1;var r=e.x.toFixed(2),n=e.y.toFixed(2);return t.minx<=r&&r<=t.maxx&&t.miny<=n&&n<=t.maxy}},Z=function Polygon(){h()(this,Polygon),this.flat=[],this.holes=[],this.clipped=[],this.clippedType=[]};function decodeLines(e,t){var r=[];return e.map(function(e){var n=[];e.map(function(e){n.push([2*e.x/t-1,2*(1-e.y/t)-1])}),r.push.apply(r,g()(function clipLine(e){var t=[],r=[];function clipType(e){for(var t=0,r=0;r<Y;r++)t|=z[r].inside(e)?0:1<<r;return t}function intersect(e,t,r){for(var n=0;n<Y;n++){var o=1<<n;if(r&o){var a=z[n].intersect(e,t);return r=clipType(a)&~o,[a,r]}}}for(var n=e[0],o=clipType(n),a=1;a<e.length;++a){for(var s=e[a],u=clipType(s),c=u,f=s;;){if(!(o|u)){var l,h;if((l=t).push.apply(l,g()(n)),u!==c)(h=t).push.apply(h,g()(s)),a<e.length-1&&(r.push(t),t=[]);else if(a===e.length-1){var d;(d=t).push.apply(d,g()(s))}break}if(o&u)break;if(o){var p=intersect(n,s,o),y=i()(p,2);n=y[0],o=y[1]}else{var m=intersect(n,s,u),v=i()(m,2);s=v[0],u=v[1]}}n=f,o=c}(t=function _removeDuplicatedVerticesOnLine(e){for(var t,r,n=[],o=0;o<e.length;o+=2){var a=e[o],i=e[o+1];a===t&&i===r||(n.push(a,i),t=a,r=i)}return n}(t)).length>0&&r.push(t);return r}(n)))}),r}function decodePolygons(e,t){var r,n=null,o=[];return e.forEach(function(e){var a=function signedPolygonArea(e){for(var t=0,r=0;r<e.length;r++){var n=(r+1)%e.length;t+=e[r].x*e[n].y,t-=e[n].x*e[r].y}return t/2}(e);if(0!==a){void 0===r&&(r=a>0);var i=r?a>0:a<0,s=function _getPreClippedVertices(e,t){return e.map(function(e){var r=e.x,n=e.y;return[r=2*r/t-1,n=2*(1-n/t)-1]})}(e,t);i&&(n&&o.push(n),n=new Z),n=function clipPolygon(e,t,r){for(var n={},o=function _loop(t){for(var r=[],o={},a=function setClippedType(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=0;t>=0&&(a=n[t]||0),r>=0&&(a|=1<<r),a&&(o[e]=a)},i=0;i<e.length-1;i++){var s=e[i],u=e[i+1],c=z[t].inside(s),f=z[t].inside(u);if(c&&f)a(r.length,i+1),r.push(u);else if(c){var l=z[t].intersect(s,u);a(r.length,i+1,t),r.push(l)}else if(f){var h=z[t].intersect(s,u);a(r.length,i,t),r.push(h),a(r.length,i+1),r.push(u)}}r.length&&(o[0]&&(o[r.length]=o[0]),r.push(r[0])),e=r,n=o},a=0;a<Y;a++)o(a);e.length>=4&&(r&&t.holes.push(t.flat.length/2),e.forEach(function(e){t.flat.push(e[0],e[1])}),Object.keys(n).forEach(function(e){t.clipped.push(2*Number(e)),t.clippedType.push(n[e])}));return t}(s,n,!i)}}),n&&o.push(n),o}var z=[{inside:function inside(e){return e[0]<=1},intersect:function intersect(e,t){return G.intersect(e,t,[1,-100],[1,100])}},{inside:function inside(e){return e[1]<=1},intersect:function intersect(e,t){return G.intersect(e,t,[-100,1],[100,1])}},{inside:function inside(e){return e[0]>=-1},intersect:function intersect(e,t){return G.intersect(e,t,[-1,-100],[-1,100])}},{inside:function inside(e){return e[1]>=-1},intersect:function intersect(e,t){return G.intersect(e,t,[-100,-1],[100,-1])}}],Y=z.length;var H=function(e){function CartoRuntimeError(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.DEFAULT;return h()(this,CartoRuntimeError),(t=A()(this,O()(CartoRuntimeError).call(this,{message:e,type:r}))).name="CartoRuntimeError",t}return L()(CartoRuntimeError,e),CartoRuntimeError}(B),Q={DEFAULT:"[Error]",NOT_SUPPORTED:"[Not supported]",WEB_GL:"[WebGL]",MVT:"[MVT]"},$=function(){function BaseCodec(e,t){h()(this,BaseCodec),e&&t&&(this._baseName=e.baseName(t))}return p()(BaseCodec,[{key:"isRange",value:function isRange(){return!1}},{key:"isIdentity",value:function isIdentity(){return!1}},{key:"sourceToInternal",value:function sourceToInternal(e,t){return t}},{key:"internalToExternal",value:function internalToExternal(e,t){return t}},{key:"externalToSource",value:function externalToSource(e,t){return t}},{key:"sourceToExternal",value:function sourceToExternal(e,t){return this.internalToExternal(e,this.sourceToInternal(e,t))}},{key:"externalToInternal",value:function externalToInternal(e,t){return this.sourceToInternal(e,this.externalToSource(e,t))}},{key:"inlineInternalMatch",value:function inlineInternalMatch(e,t){return"".concat(e)}}]),BaseCodec}(),X=function(e){function IdentityCodec(){return h()(this,IdentityCodec),A()(this,O()(IdentityCodec).apply(this,arguments))}return L()(IdentityCodec,e),p()(IdentityCodec,[{key:"isIdentity",value:function isIdentity(){return!0}},{key:"sourceToInternal",value:function sourceToInternal(e,t){return t}},{key:"internalToExternal",value:function internalToExternal(e,t){return t}},{key:"sourceToExternal",value:function sourceToExternal(e,t){return t}},{key:"externalToSource",value:function externalToSource(e,t){return t}},{key:"externalToInternal",value:function externalToInternal(e,t){return t}}]),IdentityCodec}($),J=4096,K="cartodb_id",ee=function(){function Metadata(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},r=t.properties,n=t.featureCount,o=t.sample,a=t.geomType,i=t.isAggregated,s=t.idProperty,u=t.extent;h()(this,Metadata),this.properties=r,this.featureCount=n,this.sample=o,this.geomType=a,this.isAggregated=i,this.idProperty=s||K,this.properties.hasOwnProperty(this.idProperty)||(this.properties[this.idProperty]={type:"number"}),this.categoryToID=new Map,this.IDToCategory=new Map,this.numCategories=0,this.extent=u||J,Object.values(r).map(function(t){t.categories=t.categories||[],t.categories.map(function(r){return e.categorizeString(t,r.name,!0)})}),this.propertyKeys=Object.keys(r)}return p()(Metadata,[{key:"setCodecs",value:function setCodecs(){throw new H('You must call "setCodecs" once you have determined the proper subclass')}},{key:"categorizeString",value:function categorizeString(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===t&&(t=null),this.categoryToID.has(t))return this.categoryToID.get(t);r||null===t||this.properties[e].categories.push({name:t,frequency:Number.NaN});var n=null===t?-(1<<24):this.numCategories;return this.categoryToID.set(t,n),this.IDToCategory.set(n,t),this.numCategories++,n}},{key:"decodedProperties",value:function decodedProperties(e){return[e]}},{key:"baseName",value:function baseName(e){return e}},{key:"sourcePropertyName",value:function sourcePropertyName(e){return e}},{key:"stats",value:function stats(e){return this.properties[e]}},{key:"codec",value:function codec(e){var t=this.baseName(e);return this.properties[t]&&this.properties[t].codec?this.properties[t].codec:new X}}]),Metadata}(),te=r(8),re=r.n(te),ne=r(9),oe=r.n(ne),ae=function(e){function NumberCodec(){return h()(this,NumberCodec),A()(this,O()(NumberCodec).apply(this,arguments))}return L()(NumberCodec,e),p()(NumberCodec,[{key:"sourceToInternal",value:function sourceToInternal(e,t){return(isNaN(t)||null==t)&&(t=-(1<<24)),t}},{key:"internalToExternal",value:function internalToExternal(e,t){return t===-(1<<24)&&(t=null),t}},{key:"externalToInternal",value:function externalToInternal(e,t){return null===t&&(t=-(1<<24)),t}}]),NumberCodec}(X),ie=function(e){function MVTNumberCodec(){return h()(this,MVTNumberCodec),A()(this,O()(MVTNumberCodec).apply(this,arguments))}return L()(MVTNumberCodec,e),p()(MVTNumberCodec,[{key:"sourceToInternal",value:function sourceToInternal(e,t){var r=re()(t);if(null!==t&&"undefined"!==r&&"number"!==r)throw new H("MVT decoding error. Metadata property '".concat(this._baseName,"' is of type 'number' but the MVT tile contained a feature property of type '").concat(r,"': '").concat(t,"'"),Q.MVT);return oe()(O()(MVTNumberCodec.prototype),"sourceToInternal",this).call(this,e,t)}}]),MVTNumberCodec}(ae),se=function(e){function CategoryCodec(){return h()(this,CategoryCodec),A()(this,O()(CategoryCodec).apply(this,arguments))}return L()(CategoryCodec,e),p()(CategoryCodec,[{key:"sourceToInternal",value:function sourceToInternal(e,t){return e.categorizeString(this._baseName,t)}},{key:"internalToExternal",value:function internalToExternal(e,t){return e.IDToCategory.get(t)}},{key:"sourceToExternal",value:function sourceToExternal(e,t){return t}},{key:"externalToSource",value:function externalToSource(e,t){return t}}]),CategoryCodec}($),ue=function(e){function MVTCategoryCodec(){return h()(this,MVTCategoryCodec),A()(this,O()(MVTCategoryCodec).apply(this,arguments))}return L()(MVTCategoryCodec,e),p()(MVTCategoryCodec,[{key:"sourceToInternal",value:function sourceToInternal(e,t){var r=re()(t);if(null!==t&&"undefined"!==r&&"string"!==r)throw new H("MVT decoding error. Metadata property '".concat(this._baseName,"' is of type 'category' but the MVT tile contained a feature property of type '").concat(r,"': '").concat(t,"'"),Q.MVT);return oe()(O()(MVTCategoryCodec.prototype),"sourceToInternal",this).call(this,e,t)}}]),MVTCategoryCodec}(se);var ce=function(e){function MVTMetadata(){return h()(this,MVTMetadata),A()(this,O()(MVTMetadata).apply(this,arguments))}return L()(MVTMetadata,e),p()(MVTMetadata,[{key:"setCodecs",value:function setCodecs(){var e=this;Object.keys(this.properties).forEach(function(t){var r=e.properties[t],n=r.type;"geometry"!==n&&(r.codec=function MVTCodecFactory(e,t,r){switch(t){case"number":return new ie(e,r);case"category":return new ue(e,r);default:throw new H("MVT decoding error. Feature property value of type '".concat(t,"' cannot be decoded."),Q.MVT)}}(e,n,t))})}}]),MVTMetadata}(ee);function addLineString(e,t,r,n,o){var a,i,s,u,c;if(e.length>=4){a=[e[0],e[1]];for(var f=2;f<=e.length;f+=2)if(i=[e[f],e[f+1]],a[0]!==i[0]||a[1]!==i[1]){f+=2;break}for(s=getLineNormal(a,i);f<=e.length;f+=2){c=!(o&&o(f));var l=void 0;if(f<=e.length-2?l=[e[f],e[f+1]]:n&&(l=[e[2],e[3]]),!c||a[0]===i[0]&&a[1]===i[1]||(t.vertices[r]=a[0],t.normals[r++]=-s[0],t.vertices[r]=a[1],t.normals[r++]=-s[1],t.vertices[r]=a[0],t.normals[r++]=s[0],t.vertices[r]=a[1],t.normals[r++]=s[1],t.vertices[r]=i[0],t.normals[r++]=s[0],t.vertices[r]=i[1],t.normals[r++]=s[1],t.vertices[r]=a[0],t.normals[r++]=-s[0],t.vertices[r]=a[1],t.normals[r++]=-s[1],t.vertices[r]=i[0],t.normals[r++]=s[0],t.vertices[r]=i[1],t.normals[r++]=s[1],t.vertices[r]=i[0],t.normals[r++]=-s[0],t.vertices[r]=i[1],t.normals[r++]=-s[1]),!l||l[0]===i[0]&&l[1]===i[1])u=s;else if(u=getLineNormal(i,l),c){var h=getJoinNormal(s,u),d=h.turnLeft,p=h.joinNormal,y=d?s:neg(u),m=d?u:neg(s);t.vertices[r]=i[0],t.normals[r++]=0,t.vertices[r]=i[1],t.normals[r++]=n?1e-37:0,t.vertices[r]=i[0],t.normals[r++]=y[0],t.vertices[r]=i[1],t.normals[r++]=y[1],t.vertices[r]=i[0],t.normals[r++]=m[0],t.vertices[r]=i[1],t.normals[r++]=m[1],p&&(t.vertices[r]=i[0],t.normals[r++]=p[0],t.vertices[r]=i[1],t.normals[r++]=p[1],t.vertices[r]=i[0],t.normals[r++]=m[0],t.vertices[r]=i[1],t.normals[r++]=m[1],t.vertices[r]=i[0],t.normals[r++]=y[0],t.vertices[r]=i[1],t.normals[r++]=y[1])}a=i,i=l,s=u}}return r}function resizeBuffer(e,t){var r=new Float32Array(t);return r.set(e),r}var fe=24,le=0,he={vertices:new Float32Array(1048576),normals:new Float32Array(1048576)};function resizeBuffers(e){var t=le+e;if(t>he.vertices.length){var r=2*t;he.vertices=resizeBuffer(he.vertices,r),he.normals=resizeBuffer(he.normals,r)}}var de=r(27),pe=2,ye=24,me=0,ve={vertices:new Float32Array(2097152),normals:new Float32Array(2097152)};function polygonDecoder_resizeBuffers(e){var t=me+e;if(t>ve.vertices.length){var r=2*t;ve.vertices=resizeBuffer(ve.vertices,r),ve.normals=resizeBuffer(ve.normals,r)}}function addVertex(e,t){ve.vertices[me]=e[t],ve.normals[me++]=0,ve.vertices[me]=e[t+1],ve.normals[me++]=0}function isClipped(e,t,r){return!!(e.clipped.includes(t)&&e.clipped.includes(r)&&e.clippedType[e.clipped.indexOf(t)]&e.clippedType[e.clipped.indexOf(r)])}function decodeGeom(e,t){switch(e){case W.POINT:return function decodePoint(e){return{verticesArrayBuffer:e,vertices:new Float32Array(e),breakpoints:[]}}(t);case W.LINE:return function decodeLine(e){var t=[],r=new Map;le=0;for(var n=0;n<e.length;n++){for(var o=e[n],a=0;a<o.length;a++)resizeBuffers(fe*o[a].length),le=addLineString(o[a],he,le);r.set(t.length,0===t.length?{start:0,end:le}:{start:r.get(t.length-1).end,end:le}),t.push(le)}for(var i=new ArrayBuffer(4*le),s=new ArrayBuffer(4*le),u=new Float32Array(i),c=new Float32Array(s),f=0;f<le;f++)u[f]=he.vertices[f],c[f]=he.normals[f];return{vertices:u,normals:c,verticesArrayBuffer:i,normalsArrayBuffer:s,featureIDToVertexIndex:r,breakpoints:t}}(t);case W.POLYGON:return function decodePolygon(e){var t=[],r=new Map;me=0;for(var n=0;n<e.length;n++){for(var o=e[n],a=function _loop(e){var t=o[e],r=de(t.flat,t.holes);polygonDecoder_resizeBuffers(pe*r.length+ye*t.flat.length);for(var n=0;n<r.length;n++)addVertex(t.flat,2*r[n]);me=addLineString(t.flat,ve,me,!0,function(e){return t.holes.includes((e-2)/2)||isClipped(t,e-4,e-2)})},i=0;i<o.length;i++)a(i);r.set(t.length,0===t.length?{start:0,end:me}:{start:r.get(t.length-1).end,end:me}),t.push(me)}for(var s=new ArrayBuffer(4*me),u=new ArrayBuffer(4*me),c=new Float32Array(s),f=new Float32Array(u),l=0;l<me;l++)c[l]=ve.vertices[l],f[l]=ve.normals[l];return{vertices:c,normals:f,verticesArrayBuffer:s,normalsArrayBuffer:u,featureIDToVertexIndex:r,breakpoints:t}}(t);default:throw new H("Unimplemented geometry type: '".concat(e,"'."),Q.NOT_SUPPORTED)}}var ge=function DummyDataframe(e){var t=e.active,r=e.center,n=e.properties,o=e.propertiesArrayBuffer,a=e.scale,i=e.type,s=e.geom,u=e.size,c=e.metadata;h()(this,DummyDataframe),this.active=t,this.center=r,this.properties=n,this.propertiesArrayBuffer=o,this.scale=a,this.type=i,this.decodedGeom=decodeGeom(i,s),this.numVertex=i===W.POINT?3*u:this.decodedGeom.vertices.length/2,this.numFeatures=i===W.POINT?u:this.decodedGeom.breakpoints.length||this.numVertex,this.propertyTex=[],this.metadata=c,this.propertyCount=0,this._aabb=function computeAABB(e,t){switch(t){case W.POINT:return[];case W.LINE:case W.POLYGON:for(var r=[],n=0;n<e.length;n++){for(var o=e[n],a={minx:Number.POSITIVE_INFINITY,miny:Number.POSITIVE_INFINITY,maxx:Number.NEGATIVE_INFINITY,maxy:Number.NEGATIVE_INFINITY},i=0;i<o.length;i++)a=_updateAABBForGeometry(o[i],a,t);a.minx===Number.POSITIVE_INFINITY&&(a=null),r.push(a)}return r}}(s,i),this._centroids=computeCentroids(this.decodedGeom,i),this.t1=[.1,.1,.1,.1],this.t2=[.1,.1,.1,.1],this.t3=[.1,.1,.1,.1],this.t4=[.1,.1,.1,.1]},xe=r(13),we=r.n(xe),_e=1,be=2,Me=3,Te={1:W.POINT,2:W.LINE,3:W.POLYGON},Pe=function(){function MVTWorker(e){h()(this,MVTWorker),this.requestAborts={}}return p()(MVTWorker,[{key:"onmessage",value:function onmessage(e){this.processEvent(e).then(function(e){var t=[];e.dataframe.empty||(t.push(e.dataframe.propertiesArrayBuffer),t.push(e.dataframe.decodedGeom.verticesArrayBuffer),e.dataframe.decodedGeom.normalsArrayBuffer&&t.push(e.dataframe.decodedGeom.normalsArrayBuffer)),postMessage(e,t)})}},{key:"processEvent",value:function(){var e=f()(u.a.mark(function _callee(e){var t,r;return u.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return(t=e.data).metadata&&(this.castMetadata(t.metadata),this.metadata=t.metadata),n.next=4,this._requestDataframe(t.x,t.y,t.z,t.url,t.layerID,this.metadata,t.tiles);case 4:return r=n.sent,n.abrupt("return",{mID:t.mID,dataframe:r});case 6:case"end":return n.stop()}},_callee,this)}));return function processEvent(t){return e.apply(this,arguments)}}()},{key:"castMetadata",value:function castMetadata(e){Object.setPrototypeOf(e,ce.prototype),e.setCodecs()}},{key:"_fetchData",value:function _fetchData(e){var t=we.a.CancelToken.source(),r={method:"GET",responseType:"arraybuffer",cancelToken:t.token,withCredentials:!0};return[we.a.get(e,r).then(function(e){return e.data}),t]}},{key:"_requestDataframe",value:function(){var e=f()(u.a.mark(function _callee2(e,t,r,n,o,a,s){var c,f,l,h,d,p,y,m=this;return u.a.wrap(function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:return c=s.map(function(e){return"".concat(e.x,",").concat(e.y,",").concat(e.z)}),Object.keys(this.requestAborts).map(function(e){c.includes(e)||(m.requestAborts[e].cancel(),postMessage({type:"abort",key:e}),delete m.requestAborts[e])}),f=this._fetchData(n),l=i()(f,2),h=l[0],d=l[1],this.requestAborts["".concat(e,",").concat(t,",").concat(r)]=d,u.prev=4,u.next=7,h;case 7:return p=u.sent,u.next=10,this.urlToDataframeTransformer(p,e,t,r,o,a);case 10:return y=u.sent,delete this.requestAborts["".concat(e,",").concat(t,",").concat(r)],u.abrupt("return",y);case 15:return u.prev=15,u.t0=u.catch(4),u.abrupt("return",{empty:!0});case 18:case"end":return u.stop()}},_callee2,this,[[4,15]])}));return function _requestDataframe(t,r,n,o,a,i,s){return e.apply(this,arguments)}}()},{key:"urlToDataframeTransformer",value:function(){var e=f()(u.a.mark(function _callee3(e,t,r,n,o,a){var i,s,c,f,l,h,d,p,v,g,x;return u.a.wrap(function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:return i=a.extent,u.next=3,e;case 3:if(0!==(s=u.sent).byteLength&&"null"!==e){u.next=6;break}return u.abrupt("return",{empty:!0});case 6:if(c=new y.VectorTile(new m(s)),!(Object.keys(c.layers).length>1)||o){u.next=9;break}throw new j("LayerID parameter wasn't specified and the MVT tile contains multiple layers: ".concat(JSON.stringify(Object.keys(c.layers)),"."),U.MISSING_REQUIRED);case 9:if(f=c.layers[o||Object.keys(c.layers)[0]]){u.next=12;break}return u.abrupt("return",{empty:!0});case 12:return l=this._decodeMVTLayer(f,a,i),h=l.geometries,d=l.properties,p=l.propertiesArrayBuffer,v=l.numFeatures,g=getRsysFromTile(t,r,n),x=this._generateDataFrame(g,h,d,p,v,a.geomType,a),u.abrupt("return",x);case 16:case"end":return u.stop()}},_callee3,this)}));return function urlToDataframeTransformer(t,r,n,o,a,i){return e.apply(this,arguments)}}()},{key:"_decodeMVTLayer",value:function _decodeMVTLayer(e,t,r){if(!e.length)return{properties:[],geometries:{},propertiesArrayBuffer:[],numFeatures:0};switch(t.geomType||(t.geomType=this._autoDiscoverType(e)),t.geomType){case W.POINT:var n=new ArrayBuffer(2*e.length*3*4);return this._decode(e,t,r,n);case W.LINE:return this._decode(e,t,r,[],decodeLines);case W.POLYGON:return this._decode(e,t,r,[],decodePolygons);default:throw new j("MVT: invalid geometry type '".concat(t.geomType,"'"),U.INCORRECT_TYPE)}}},{key:"_autoDiscoverType",value:function _autoDiscoverType(e){var t=e.feature(0).type;switch(t){case _e:return W.POINT;case be:return W.LINE;case Me:return W.POLYGON;default:throw new j("MVT: invalid geometry type '".concat(t,"'"),U.INCORRECT_TYPE)}}},{key:"_decode",value:function _decode(e,t,r,n,o){var a,i=0;n&&(a=new Float32Array(n));for(var s=this._initializePropertyArrays(t,e.length),u=s.properties,c=s.propertiesArrayBuffer,f=this._scalarPropertyCodecs(t),l=this._rangePropertyCodecs(t),h=0;h<e.length;h++){var d=e.feature(h);this._checkType(d,t.geomType);var p=d.loadGeometry();if(o){var y=o(p,r);n.push(y)}else{var m=2*p[0][0].x/r-1,v=2*(1-p[0][0].y/r)-1;if(m<-1||m>=1||v<-1||v>=1)continue;a[6*i+0]=m,a[6*i+1]=v,a[6*i+2]=m,a[6*i+3]=v,a[6*i+4]=m,a[6*i+5]=v}if(void 0===d.properties[t.idProperty])throw new H("MVT feature with undefined idProperty '".concat(t.idProperty,"'"),Q.MVT);this._decodeProperties(t,f,l,u,d,i),i++}return{properties:u,propertiesArrayBuffer:c,geometries:n,numFeatures:i}}},{key:"_checkType",value:function _checkType(e,t){var r=e.type,n=Te[r];if(n!==t)throw new H("MVT: mixed geometry types in the same layer. Layer has type: ".concat(t," but feature was ").concat(n),Q.MVT)}},{key:"_initializePropertyArrays",value:function _initializePropertyArrays(e,t){var r=this._getPropertyNamesFrom(e),n=this._getPropertiesFor(r,t);return{propertyNames:r,properties:n.properties,propertiesArrayBuffer:n.propertiesArrayBuffer}}},{key:"_getSourcePropertyNamesFrom",value:function _getSourcePropertyNamesFrom(e){return e.propertyKeys.filter(function(t){return"geometry"!==e.properties[e.baseName(t)].type})}},{key:"_getPropertyNamesFrom",value:function _getPropertyNamesFrom(e){var t=[];return this._getSourcePropertyNamesFrom(e).forEach(function(r){e.decodedProperties(r).forEach(function(e){t.push(e)})}),t}},{key:"_getPropertiesFor",value:function _getPropertiesFor(e,t){for(var r={},n=1024*Math.ceil(t/1024),o=new ArrayBuffer(4*n*e.length),a=o,i=0;i<e.length;i++){r[e[i]]=new Float32Array(o,4*i*n,n)}return{properties:r,propertiesArrayBuffer:a}}},{key:"_scalarPropertyCodecs",value:function _scalarPropertyCodecs(e){return this._getSourcePropertyNamesFrom(e).map(function(t){return[t,e.codec(t)]}).filter(function(e){var t=i()(e,2);t[0];return!t[1].isRange()})}},{key:"_rangePropertyCodecs",value:function _rangePropertyCodecs(e){return this._getSourcePropertyNamesFrom(e).map(function(t){return[t,e.decodedProperties(t),e.codec(t)]}).filter(function(e){var t=i()(e,3);t[0],t[1];return t[2].isRange()})}},{key:"_decodeProperties",value:function _decodeProperties(e,t,r,n,o,a){for(var s=t.length,u=0;u<s;u++){var c=i()(t[u],2),f=c[0],l=c[1],h=o.properties[f];n[f][a]=l.sourceToInternal(e,h)}s=r.length;for(var d=0;d<s;d++){var p=i()(r[d],3),y=(f=p[0],i()(p[1],2)),m=y[0],v=y[1],g=(l=p[2],o.properties[f]),x=l.sourceToInternal(e,g),w=i()(x,2),_=w[0],b=w[1];n[m][a]=_,n[v][a]=b}}},{key:"_generateDataFrame",value:function _generateDataFrame(e,t,r,n,o,a,i){return new ge({active:!1,center:e.center,geom:t,properties:r,propertiesArrayBuffer:n,scale:e.scale,size:o,type:a,metadata:i})}}]),MVTWorker}(),ke=["year","month","day","hour","minute","second"],Ce=[1,1,1,0,0,0],Ee=0,Ie=1,Se=2,Ne=3,Fe=4,Ve=5,Ae=864e5,Re=36e5,Oe=6e4,De=1e3;function startLevel(e){for(var t=ke.length-1;t>0&&e[ke[t]]===Ce[t];)--t;return t}function pad(e,t){return e.toString().padStart(t,"0")}function parsedValue(e){var t=msToDate(e);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds()}}function invalidPeriod(e,t){throw new Error("Invalid period of ".concat(t," between ").concat(e.v1," and ").concat(e.v2))}function yearWeek(e,t){var r=function isoDow(e,t,r){var n=new Date(e,t-1,r).getDay();return 0===n?7:n}(e,1,1),n=r>4?9-r:2-r;return Math.abs(t-n)%7!=0?[]:t<n?yearWeek(e-1,t+=Math.round((Date.UTC(e,0,1)-Date.UTC(e-1,0,1))/Ae)):Date.UTC(e,0,1)+(t-1+3)*Ae>=Date.UTC(e+1,0,1)?yearWeek(e+1,t-=Math.round((Date.UTC(e+1,0,1)-Date.UTC(e,0,1))/Ae)):[e,1+Math.round((t-n)/7)]}function periodISO(e,t){var r=parsedValue(e),n=parsedValue(t),o=startLevel(r),a=startLevel(n),s={v1:e,v2:t,t1:r,t2:n};return Math.max(o,a)===Ee?function yearsPeriod(e){var t=e.t2.year-e.t1.year;return 1e3===t&&(e.t1.year-1)%1e3==0?"M".concat(1+(e.t1.year-1)/1e3):100===t&&(e.t1.year-1)%100==0?"C".concat(1+(e.t1.year-1)/100):10===t&&e.t1.year%10==0?"D".concat(e.t1.year/10):1===t?pad(e.t1.year,4):void invalidPeriod("".concat(t," years"))}(s):Math.max(o,a)===Ie?function monthsPeriod(e){var t=12*e.t2.year+e.t2.month-12*e.t1.year-e.t1.month;return 6===t&&(e.t1.month-1)%6==0?"".concat(pad(e.t1.year,4),"S").concat(1+(e.t1.month-1)/6):4===t?"".concat(pad(e.t1.year,4),"t").concat(1+(e.t1.month-1)/4):3===t?"".concat(pad(e.t1.year,4),"-Q").concat(1+(e.t1.month-1)/3):1===t?"".concat(pad(e.t1.year,4),"-").concat(pad(e.t1.month,2)):void invalidPeriod("".concat(t," months"))}(s):Math.max(o,a)===Se?function daysPeriod(e){var t=Math.round((e.v2-e.v1)/Ae);if(1===t)return"".concat(pad(e.t1.year,4),"-").concat(pad(e.t1.month,2),"-").concat(pad(e.t1.day,2));if(7===t){var r=e.t1.year,n=Date.UTC(r,0,1),o=yearWeek(r,1+Math.round((e.v1-n)/Ae)),a=i()(o,2),s=a[0],u=a[1];if(s&&u)return"".concat(pad(s,4),"-W").concat(pad(u,2));invalidPeriod("7 days")}else invalidPeriod("".concat(t," days"))}(s):Math.max(o,a)===Ne?function hoursPeriod(e){var t=Math.round((e.v2-e.v1)/Re);if(1===t)return"".concat(pad(e.t1.year,4),"-").concat(pad(e.t1.month,2),"-").concat(pad(e.t1.day,2),"T").concat(pad(e.t1.hour,2));invalidPeriod("".concat(t," hours"))}(s):Math.max(o,a)===Fe?function minutesPeriod(e){var t=Math.round((e.v2-e.v1)/Oe);if(1===t)return"".concat(pad(e.t1.year,4),"-").concat(pad(e.t1.month,2),"-").concat(pad(e.t1.day,2),"T").concat(pad(e.t1.hour,2),":").concat(pad(e.t1.minute,2));invalidPeriod("".concat(t," minutes"))}(s):Math.max(o,a)===Ve?function secondsPeriod(e){var t=Math.round((e.v2-e.v1)/De);if(1===t)return"".concat(pad(e.t1.year,4),"-").concat(pad(e.t1.month,2),"-").concat(pad(e.t1.day,2),"T").concat(pad(e.t1.hour,2),":").concat(pad(e.t1.minute,2),":").concat(pad(e.t1.second,2));invalidPeriod("".concat(t," seconds"))}(s):void invalidPeriod(s,"fractional seconds")}var Le=function(e){function CartoParsingError(e){var t;h()(this,CartoParsingError);return(t=A()(this,O()(CartoParsingError).call(this,{message:e,type:"[Error]"}))).name="CartoParsingError",t}return L()(CartoParsingError,e),CartoParsingError}(B),qe=function(){function IsoParser(e){h()(this,IsoParser),this._format=e}return p()(IsoParser,[{key:"check",value:function check(e){return e.match(this._format)}}]),IsoParser}();function fieldDefault(e,t){return void 0===e?t:Number(e)}function dateFields(e){return{year:fieldDefault(e.year,1),month:fieldDefault(e.month,1),day:fieldDefault(e.day,1),hour:fieldDefault(e.hour,0),minute:fieldDefault(e.minute,0),second:fieldDefault(e.second,0)}}function fieldsFromMatch(e){return dateFields({year:e[1],month:e[2],day:e[3],hour:e[4],minute:e[5],second:e[6]})}var Be=function(e){function YMDHMSParser(){return h()(this,YMDHMSParser),A()(this,O()(YMDHMSParser).call(this,/^(\d\d\d\d)(?:\-?(\d\d)(?:\-?(\d\d)(?:[T\s]?(\d\d)(?:\:(\d\d)(?:\:(\d\d))?)?)?)?)?$/))}return L()(YMDHMSParser,e),p()(YMDHMSParser,[{key:"parse",value:function parse(e){var t=this.check(e)||[],r=t.slice(),n=[1,2,3,4,5,6].find(function(e){return void 0===r[e]})||7;return 1===n?r[1]=2:r[n-1]=Number(r[n-1])+1,[fieldsFromMatch(t),fieldsFromMatch(r)]}}]),YMDHMSParser}(qe),je=function(e){function MillenniumParser(){return h()(this,MillenniumParser),A()(this,O()(MillenniumParser).call(this,/^M(\d+)$/))}return L()(MillenniumParser,e),p()(MillenniumParser,[{key:"parse",value:function parse(e){var t=this.check(e),r=Number(t[1]),n=function year(e){return 1e3*(e-1)+1};return[dateFields({year:n(r)}),dateFields({year:n(r+1)})]}}]),MillenniumParser}(qe),Ue=function(e){function CenturyParser(){return h()(this,CenturyParser),A()(this,O()(CenturyParser).call(this,/^C(\d+)$/))}return L()(CenturyParser,e),p()(CenturyParser,[{key:"parse",value:function parse(e){var t=this.check(e),r=Number(t[1]),n=function year(e){return 100*(e-1)+1};return[dateFields({year:n(r)}),dateFields({year:n(r+1)})]}}]),CenturyParser}(qe),We=function(e){function DecadeParser(){return h()(this,DecadeParser),A()(this,O()(DecadeParser).call(this,/^D(\d+)$/))}return L()(DecadeParser,e),p()(DecadeParser,[{key:"parse",value:function parse(e){var t=this.check(e),r=Number(t[1]),n=function year(e){return 10*e};return[dateFields({year:n(r)}),dateFields({year:n(r+1)})]}}]),DecadeParser}(qe),Ge=function(e){function SemesterParser(){return h()(this,SemesterParser),A()(this,O()(SemesterParser).call(this,/^(\d\d\d\d)S(\d)$/))}return L()(SemesterParser,e),p()(SemesterParser,[{key:"parse",value:function parse(e){var t=this.check(e),r=Number(t[1]),n=Number(t[2]),o=function month(e){return 6*(e-1)+1};return[dateFields({year:r,month:o(n)}),dateFields({year:r,month:o(n+1)})]}}]),SemesterParser}(qe),Ze=function(e){function TrimesterParser(){return h()(this,TrimesterParser),A()(this,O()(TrimesterParser).call(this,/^(\d\d\d\d)t(\d)$/))}return L()(TrimesterParser,e),p()(TrimesterParser,[{key:"parse",value:function parse(e){var t=this.check(e),r=Number(t[1]),n=Number(t[2]),o=function month(e){return 4*(e-1)+1};return[dateFields({year:r,month:o(n)}),dateFields({year:r,month:o(n+1)})]}}]),TrimesterParser}(qe),ze=function(e){function QuarterParser(){return h()(this,QuarterParser),A()(this,O()(QuarterParser).call(this,/^(\d\d\d\d)\-?Q(\d)$/))}return L()(QuarterParser,e),p()(QuarterParser,[{key:"parse",value:function parse(e){var t=this.check(e),r=Number(t[1]),n=Number(t[2]),o=function month(e){return 3*(e-1)+1};return[dateFields({year:r,month:o(n)}),dateFields({year:r,month:o(n+1)})]}}]),QuarterParser}(qe);function startOfIsoWeek(e,t){var r=function parseISO_isoDow(e,t,r){var n=new Date(e,t-1,r).getDay();return 0===n?7:n}(e,1,1);return function addDays(e,t){var r=new Date(e.valueOf());return r.setDate(r.getDate()+t),r}(new Date(e,0,r>4?9-r:2-r),7*(t-1))}var Ye=function(e){function WeekParser(){return h()(this,WeekParser),A()(this,O()(WeekParser).call(this,/^(\d\d\d\d)\-?W(\d\d)$/))}return L()(WeekParser,e),p()(WeekParser,[{key:"parse",value:function parse(e){var t=this.check(e),r=Number(t[1]),n=Number(t[2]),o=startOfIsoWeek(r,n),a=startOfIsoWeek(r,n+1),i=function fields(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}};return[dateFields(i(o)),dateFields(i(a))]}}]),WeekParser}(qe),He=[new je,new Ue,new We,new Ge,new Ze,new ze,new Ye,new Be];function parseISO(e){var t=function findParser(e){return He.find(function(t){return t.check(e)})}(e=e||"");if(!t)throw new Le("No date parser found for ".concat(e));return t.parse(e)}var Qe=function(){function TimeZoneDate(e,t){h()(this,TimeZoneDate),this._value=e,this._date=msToDate(e),this._timeZone=t}return p()(TimeZoneDate,[{key:"year",get:function get(){return this._date.getUTCFullYear()}},{key:"month",get:function get(){return this._date.getUTCMonth()+1}},{key:"day",get:function get(){return this._date.getUTCDate()}},{key:"hour",get:function get(){return this._date.getUTCHours()}},{key:"minute",get:function get(){return this._date.getUTCMinutes()}},{key:"second",get:function get(){return this._date.getUTCSeconds()}},{key:"text",get:function get(){return periodISO(this._date.getTime(),this._date.getTime()+1e3)}},{key:"timeZone",get:function get(){return this._timeZone}}],[{key:"fromValue",value:function fromValue(e,t){return new TimeZoneDate(e,t)}},{key:"from",value:function from(e,t,r,n,o,a,i){return this.fromValue(Date.UTC(e,(t||1)-1,r,n,o,a),i)}}]),TimeZoneDate}(),$e=function(){function TimeRange(e,t,r,n){if(h()(this,TimeRange),this._startValue=r,this._endValue=n,r&&n)this._iso=periodISO(r,n);else if(!r&&!n&&t){var o=function _startEndTimeValues(e){return parseISO(e).map(_timeValue)}(t);this._iso=t,this._startValue=o[0],this._endValue=o[1]}this._timeZone=e}return p()(TimeRange,[{key:"timeZone",get:function get(){return this._timeZone}},{key:"iso",get:function get(){return this._iso}},{key:"startValue",get:function get(){return this._startValue}},{key:"endValue",get:function get(){return this._endValue}},{key:"startDate",get:function get(){return Qe.fromValue(this._startValue,this._timeZone)}},{key:"endDate",get:function get(){return Qe.fromValue(this._endValue,this._timeZone)}}]),TimeRange}();function _timeValue(e){return Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second)}Math.PI;var Xe=6378137;Math.PI;function msToDate(e){return new Date(e)}function castTimeRange(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0===e||function isTimeRange(e){return e instanceof $e}(e)?e&&t?util_timeRange({iso:e._iso,timeZone:t}):e:"string"==typeof e?util_timeRange({iso:e,timeZone:t}):void 0}function util_timeRange(e){var t=e.start,r=e.end,n=e.iso,o=e.timeZone;return new $e(o,n,t,r)}var Je=function(e){function WindshaftDateCodec(e,t){var r;h()(this,WindshaftDateCodec),r=A()(this,O()(WindshaftDateCodec).call(this,e,t));var n=e.stats(t).min;return r._min_ms=1e3*n,r._min_date=msToDate(r._min_ms),r}return L()(WindshaftDateCodec,e),p()(WindshaftDateCodec,[{key:"sourceToInternal",value:function sourceToInternal(e,t){return msToDate(1e3*t)-this._min_date}},{key:"internalToExternal",value:function internalToExternal(e,t){var r=t;return msToDate(r+=this._min_ms)}},{key:"externalToSource",value:function externalToSource(e,t){return t.getTime()/1e3}},{key:"sourceToExternal",value:function sourceToExternal(e,t){return function asDate(e){if(e instanceof Date)return e;return msToDate(1e3*e)}(t)}},{key:"inlineInternalMatch",value:function inlineInternalMatch(e,t){var r=t._min_ms-this._min_ms;return"(".concat(e,"-").concat(r.toFixed(20),")")}}]),WindshaftDateCodec}($);var Ke=function(e){function TimeRangeCodec(e,t){var r;h()(this,TimeRangeCodec),r=A()(this,O()(TimeRangeCodec).call(this,e,t));var n=e.stats(t),o=n.min,a=n.grouping&&n.grouping.timezone,i=util_timeRange({timeZone:a,iso:o});return r._min=i.startValue/1e3,r._timeZone=a,r}return L()(TimeRangeCodec,e),p()(TimeRangeCodec,[{key:"isRange",value:function isRange(){return!0}},{key:"sourceToInternal",value:function sourceToInternal(e,t){var r=this,n=util_timeRange({iso:t});return[n.startValue/1e3,n.endValue/1e3].map(function(e){return e-r._min})}},{key:"internalToExternal",value:function internalToExternal(e,t){var r=i()(t,2),n=r[0],o=r[1];return util_timeRange({start:1e3*(n+this._min),end:1e3*(o+this._min),timeZone:this._timeZone})}},{key:"externalToSource",value:function externalToSource(e,t){return castTimeRange(t,this._timeZone)._iso}},{key:"sourceToExternal",value:function sourceToExternal(e,t){return util_timeRange({iso:t,timeZone:this._timeZone})}},{key:"inlineInternalMatch",value:function inlineInternalMatch(e,t){var r=t._min.getTime()-this._min.getTime();return"(".concat(e,"-").concat(r.toFixed(20),")")}}]),TimeRangeCodec}($),et=function(e){function CartoMapsAPIError(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt.DEFAULT;return h()(this,CartoMapsAPIError),(t=A()(this,O()(CartoMapsAPIError).call(this,{message:e,type:r}))).name="CartoMapsAPIError",t}return L()(CartoMapsAPIError,e),CartoMapsAPIError}(B),tt={DEFAULT:"[Error]",SQL:"[SQL]",NOT_SUPPORTED:"[Not supported]",SECURITY:"[Security]"};var rt=function(e){function WindshaftMetadata(){var e,t;h()(this,WindshaftMetadata);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=A()(this,(e=O()(WindshaftMetadata)).call.apply(e,[this].concat(n)))).propertyKeys=[],t.baseNames={},Object.keys(t.properties).forEach(function(e){var r=t.properties[e];r.aggregations?Object.values(r.aggregations).forEach(function(r){t._addProperty(e,r)}):r.dimension?r.dimension.range?(r.dimension.range.forEach(function(r){t._addProperty(e,r,!1)}),t._addProperty(e,r.dimension.propertyName)):t._addProperty(e,r.dimension.propertyName):t._addProperty(e,e)}),t}return L()(WindshaftMetadata,e),p()(WindshaftMetadata,[{key:"_addProperty",value:function _addProperty(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.baseNames[t]=e,r&&this.propertyKeys.push(t)}},{key:"_dimensionInfo",value:function _dimensionInfo(e){var t=this.baseName(e)||e,r=this.properties[t],n=null;t!==e&&t!==e&&r.dimension&&(n=r.dimension);var o=r.type,a=n?function dimensionBaseType(e){return e.type}(n):o;return{baseName:t,column:r,dimension:n,dataframeType:n?function dimensionType(e,t){if(e.range)return"date";return e.type}(n):a,baseType:o,sourceType:a}}},{key:"baseName",value:function baseName(e){return this.baseNames[e]}},{key:"decodedProperties",value:function decodedProperties(e){var t=this._dimensionInfo(e).dimension;return t&&t.grouping&&t.range?t.range:oe()(O()(WindshaftMetadata.prototype),"decodedProperties",this).call(this,e)}},{key:"stats",value:function stats(e){var t=this._dimensionInfo(e).dimension;return t&&t.grouping?t:oe()(O()(WindshaftMetadata.prototype),"stats",this).call(this,e)}},{key:"setCodecs",value:function setCodecs(){!function setMetadataCodecs(e){Object.keys(e.properties).forEach(function(t){var r=e.properties[t],n=r.type;if("geometry"!==n){var o=r.dimension?r.dimension.type:null,a=o?r.dimension.propertyName:t,i="category"===o&&r.dimension.range?"timerange":o;r.codec=function windshaftCodecFactory(e,t,r){switch(t){case"number":return new ae(e,r);case"category":return new se(e,r);case"date":return new Je(e,r);case"timerange":return new Ke(e,r);default:throw new et("Windshaft MVT decoding error. Feature property value of type '".concat(t,"' cannot be decoded."),tt.NOT_SUPPORTED)}}(e,i||n,a||t)}})}(this)}},{key:"sourcePropertyName",value:function sourcePropertyName(e){var t=this.baseName(e),r=this.properties[t].dimension;return r&&r.range?r.propertyName:e}}]),WindshaftMetadata}(ce);var nt=function(e){function WindshaftWorker(){return h()(this,WindshaftWorker),A()(this,O()(WindshaftWorker).apply(this,arguments))}return L()(WindshaftWorker,e),p()(WindshaftWorker,[{key:"castMetadata",value:function castMetadata(e){Object.setPrototypeOf(e,rt.prototype),e.setCodecs()}}]),WindshaftWorker}(Pe);const ot={MVT:new Pe,windshaft:new nt};onmessage=function(e){return ot[e.data.workerName].onmessage(e)}}]);